<!DOCTYPE html>
<html lang="ja">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--Description-->
    
        <meta name="description" content="uroboroSQLの公式ドキュメントサイトです。">
    

    <!--Author-->
    
        <meta name="author" content="Future Architect">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Getting Started"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="uroboroSQL ドキュメント"/>

    <!--Page Cover-->
    
        <meta property="og:image" content="/uroborosql-doc/images/logo.png"/>
    

    <!-- Title -->
    
    <title>Getting Started - uroboroSQL ドキュメント</title>

    <!-- Custom CSS -->
    <!-- <link rel="stylesheet" href="/css/main.css"> -->
    <link rel="stylesheet" href="/uroborosql-doc/css/main.css">

    <!--[if lt IE 8]>
        <script src="/uroborosql-doc/js/ie/html5shiv.js"></script>
    <![endif]-->

    <!--[if lt IE 8]>
        <link rel="stylesheet" href="/uroborosql-doc/sass/ie8.css">
    <![endif]-->

    <!--[if lt IE 9]>
        <link rel="stylesheet" href="/uroborosql-doc/sass/ie9.css">
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" />
    <link rel="shortcut icon" href="/uroborosql-doc/favicon.ico">

    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer>
      {lang: 'ja'}
    </script>
    <!-- Google Analytics -->
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-93486523-1', 'auto');
        ga('send', 'pageview');

    </script>



</head>


<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <div class="inner">
        <!-- Logo -->
        <a href="/uroborosql-doc/" class="logo">
            <span class="symbol"><img src="/uroborosql-doc//images/logo.png" alt="" /></span>
        </a>
        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>
    </div>
</header>
<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <form id="search-form">
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off"/>
        <i class="fa fa-times" onclick="resetSearch()"></i>
    </form>
    <div id="local-search-result"></div>
    <p class='no-result'>No results found</p>
    <script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="/uroborosql-doc/js/search.js"></script>
    <script>
    var path = "/uroborosql-doc//search.xml";
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>
    <ul id="menu-agenda">
        <li><a href="/uroborosql-doc/why_uroborosql/">Why uroboroSQL?</a></li>
        <li><a href="/uroborosql-doc/getting_started/">Getting Started</a></li>
        <li><a href="/uroborosql-doc/basics/">基本操作</a></li>
        <li><a href="/uroborosql-doc/advanced/">高度な操作</a></li>
        <li><a href="/uroborosql-doc/developer_guide/">開発者ガイド</a></li>
        <li><a href="/uroborosql-doc/license/">License</a></li>
        <li><a href="/uroborosql-doc/about_uroborosql/">uroboroSQLについて</a></li>
    </ul>
</nav>

        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    <h1>Getting Started</h1>



<!-- Gallery -->


<!-- Content -->
<hr>
<ul>
<li><a href="#環境設定">環境設定</a><ul>
<li><a href="#ビルドツールの設定">ビルドツールの設定</a></li>
<li><a href="#事前準備">事前準備</a></li>
</ul>
</li>
<li><a href="#サンプルプロジェクトの実行">サンプルプロジェクトの実行</a></li>
<li><a href="#サンプルプロジェクトの構成">サンプルプロジェクトの構成</a></li>
<li><a href="#SQLの実行方法">SQLの実行方法</a></li>
<li><a href="#SQL-REPL">SQL-REPL</a></li>
</ul>
<hr>
<h2 id="環境設定"><a href="#環境設定" class="headerlink" title="環境設定"></a>環境設定</h2><h3 id="ビルドツールの設定"><a href="#ビルドツールの設定" class="headerlink" title="ビルドツールの設定"></a>ビルドツールの設定</h3><p>uroboroSQLをMavenプロジェクトに組み込むには、<strong>pom.xml</strong>に以下の記述を加えて下さい。<br>uroboroSQLは<a href="https://search.maven.org/#search%7Cga%7C1%7Curoborosql" target="_blank" rel="external">Maven Central Repository</a>で公開されています。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jp.co.future<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>uroborosql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Gradleプロジェクトの場合は、<strong>build.gradle</strong>のdependencies内に以下の記述を加えて下さい。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> <span class="keyword">group</span>: <span class="string">'jp.co.future'</span>, name: <span class="string">'uroborosql'</span>, version: <span class="string">'0.6.1'</span></div></pre></td></tr></table></figure>
<h2 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h2><p>事前準備として、</p>
<ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">JDK8</a></li>
<li><a href="https://maven.apache.org/download.cgi" target="_blank" rel="external">Apache Maven</a></li>
</ul>
<p>をインストールしてください。</p>
<h2 id="サンプルプロジェクトの実行"><a href="#サンプルプロジェクトの実行" class="headerlink" title="サンプルプロジェクトの実行"></a>サンプルプロジェクトの実行</h2><p>uroboroSQLのサンプルアプリケーションであるuroborosql-sampleを使ってuroboroSQLを動かしてみましょう。</p>
<p>まず始めに<a href="https://github.com/future-architect/uroborosql-sample" target="_blank" rel="external">uroborosql-sample</a>から最新のソースコードを取得します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/future-architect/uroborosql-sample.git</div></pre></td></tr></table></figure></p>
<p>取得できたらcloneしたフォルダに移動します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> uroborosql-sample</div></pre></td></tr></table></figure></p>
<p>まずはサンプルアプリケーションを実行してみましょう。<br>サンプルアプリケーションは以下の起動コマンドで実行します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn -PrunMain</div></pre></td></tr></table></figure></p>
<p>これでサンプルアプリケーションが実行されます。（初回実行時は必要なライブラリをダウンロードするため時間がかかります）<br>アプリケーションの実行ログが出力され、Mavenが正常終了すれば成功です。<br>色々ログが流れますが、この中でDB接続からテーブル作成、データの挿入、検索、バッチ更新、トランザクション、といった一連の処理が実行されています。</p>
<p>Main.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> jp.co.future.uroborosql.sample;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.UncheckedIOException;</div><div class="line"><span class="keyword">import</span> java.nio.file.Files;</div><div class="line"><span class="keyword">import</span> java.nio.file.Path;</div><div class="line"><span class="keyword">import</span> java.nio.file.Paths;</div><div class="line"><span class="keyword">import</span> java.time.LocalDate;</div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.stream.Collectors;</div><div class="line"><span class="keyword">import</span> java.util.stream.IntStream;</div><div class="line"><span class="keyword">import</span> java.util.stream.Stream;</div><div class="line"></div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.SqlAgent;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.SqlAgentFactoryImpl;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.UroboroSQL;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.config.SqlConfig;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.context.SqlContextFactoryImpl;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.sample.entity.Department;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.sample.entity.Employee;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.sample.type.Gender;</div><div class="line"><span class="keyword">import</span> jp.co.future.uroborosql.utils.CaseFormat;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * uroboroSQL Sample Application</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> H.Sugimoto</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</div><div class="line">  <span class="comment">/** ロガー */</span></div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(Main.class);</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">final</span> String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="comment">// create SqlConfig</span></div><div class="line">    SqlConfig config = UroboroSQL</div><div class="line">        .builder(<span class="string">"jdbc:h2:mem:test;DB_CLOSE_DELAY=-1"</span>, <span class="string">"sa"</span>, <span class="string">""</span>)</div><div class="line">        <span class="comment">// SqlContextFactoryの設定（Enum定数パッケージ設定の追加）</span></div><div class="line">        .setSqlContextFactory(</div><div class="line">            <span class="keyword">new</span> SqlContextFactoryImpl().setEnumConstantPackageNames(Arrays.asList(Gender.class.getPackage()</div><div class="line">                .getName())))</div><div class="line">        <span class="comment">// SqlAgentFactoryの設定（Queryの戻り値のMapのキー文字列のデフォルトCaseFormat設定の追加）</span></div><div class="line">        .setSqlAgentFactory(<span class="keyword">new</span> SqlAgentFactoryImpl().setDefaultMapKeyCaseFormat(CaseFormat.CAMEL_CASE))</div><div class="line">        .build();</div><div class="line"></div><div class="line">    <span class="comment">// create SqlAgent. SqlAgent implements AutoClosable.</span></div><div class="line">    <span class="keyword">try</span> (SqlAgent agent = config.agent()) &#123;</div><div class="line"></div><div class="line">      <span class="comment">// create table :  テーブル作成</span></div><div class="line">      <span class="keyword">int</span> createCount = agent.update(<span class="string">"ddl/create_tables"</span>).count();</div><div class="line">      log(<span class="string">"ddl/create_tables count=&#123;&#125;"</span>, createCount);</div><div class="line"></div><div class="line">      <span class="comment">// setup data : 初期データ挿入</span></div><div class="line">      <span class="keyword">int</span> setupCount = agent.update(<span class="string">"setup/insert_data"</span>).count();</div><div class="line">      log(<span class="string">"setup/insert_data count=&#123;&#125;"</span>, setupCount);</div><div class="line"></div><div class="line">      <span class="comment">// select department data (collect) : 部署データ検索（collect API）</span></div><div class="line">      log(<span class="string">"select department data (collect)"</span>);</div><div class="line">      <span class="comment">// no parameter : バインドパラメータ指定なしで検索</span></div><div class="line">      List&lt;Map&lt;String, Object&gt;&gt; departments = agent.query(<span class="string">"department/select_department"</span>).collect();</div><div class="line">      departments.forEach(data -&gt; log(toS(data)));</div><div class="line"></div><div class="line">      <span class="comment">// add bind parameter : バインドパラメータを設定して検索</span></div><div class="line">      log(<span class="string">"select department data (collect) set param(dept_no=1001)"</span>);</div><div class="line">      departments = agent.query(<span class="string">"department/select_department"</span>).param(<span class="string">"dept_no"</span>, <span class="number">1001</span>).collect();</div><div class="line">      departments.forEach(data -&gt; log(toS(data)));</div><div class="line"></div><div class="line">      <span class="comment">// with Entity : エンティティによる部署データ検索</span></div><div class="line">      log(<span class="string">"select department data with Entity (collect)"</span>);</div><div class="line">      <span class="comment">// no parameter : 条件指定なしで検索</span></div><div class="line">      List&lt;Department&gt; departmentEntities = agent.query(Department.class).collect();</div><div class="line">      departmentEntities.forEach(data -&gt; log(toS(data)));</div><div class="line"></div><div class="line">      <span class="comment">// add bind parameter : 条件を設定して検索</span></div><div class="line">      log(<span class="string">"select department data with Entity (collect) set param(deptNo=1001)"</span>);</div><div class="line">      departmentEntities = agent.query(Department.class).param(<span class="string">"deptNo"</span><span class="comment">/* camelCase */</span>, <span class="number">1001</span>).collect();</div><div class="line">      departmentEntities.forEach(data -&gt; log(toS(data)));</div><div class="line"></div><div class="line">      <span class="comment">// find department by dept_no key : キー（dept_no）を指定して、部署データ１件取得（find API）</span></div><div class="line">      log(<span class="string">"select department data by key (find)"</span>);</div><div class="line">      Department department = agent.find(Department.class, <span class="number">1002</span>).orElse(<span class="keyword">null</span>);</div><div class="line">      log(toS(department));</div><div class="line"></div><div class="line">      <span class="comment">// find first : findFirstを使用した先頭1件検索</span></div><div class="line">      log(<span class="string">"select first employee data.(Optional)"</span>);</div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).findFirst().ifPresent(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      <span class="comment">// select employee data (stream) : 従業員データ検索（stream API）</span></div><div class="line">      log(<span class="string">"select employee data (stream)"</span>);</div><div class="line">      <span class="comment">// no parameter : バインドパラメータ指定なしで検索（BEGIN-ENDで囲まれた範囲内のIF条件がすべてfalseのため、BEGIN-ENDの中が削除される）</span></div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      <span class="comment">// add bind date parameter : バインドパラメータ（日付型）を指定して検索</span></div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).param(<span class="string">"birth_date_from"</span>, LocalDate.of(<span class="number">1990</span>, <span class="number">1</span>, <span class="number">1</span>)).stream()</div><div class="line">          .forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      <span class="comment">// add bind list parameter : バインドパラメータ（IN句用）を指定して検索</span></div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).paramList(<span class="string">"gender_list"</span>, Gender.FEMALE).stream()</div><div class="line">          .forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      <span class="comment">// use sql enum constant : SQL上でEnum定数を使用した検索</span></div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).param(<span class="string">"female"</span>, <span class="keyword">true</span>).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      <span class="comment">// with Entity : エンティティによる従業員データ検索（stream API）</span></div><div class="line">      log(<span class="string">"select employee data with Entity (stream)"</span>);</div><div class="line">      <span class="comment">// no parameter : バインドパラメータ指定なしで検索</span></div><div class="line">      agent.query(Employee.class).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line">      <span class="comment">// use LocalDate parameter : LocalDateを使用した検索</span></div><div class="line">      agent.query(Employee.class).param(<span class="string">"birthDate"</span>, LocalDate.of(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">2</span>)).stream()</div><div class="line">          .forEachOrdered(m -&gt; log(toS(m)));</div><div class="line">      <span class="comment">// use enum parameter : Enumを使用した検索</span></div><div class="line">      agent.query(Employee.class).param(<span class="string">"gender"</span>, Gender.FEMALE).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">      log(<span class="string">"delete tables with sql literal"</span>);</div><div class="line">      <span class="comment">// update with sql literal</span></div><div class="line">      log(<span class="string">"delete dept_emp count=&#123;&#125;"</span>, agent.updateWith(<span class="string">"delete from dept_emp"</span>).count());</div><div class="line">      log(<span class="string">"delete department count=&#123;&#125;"</span>, agent.updateWith(<span class="string">"delete from department"</span>).count());</div><div class="line">      log(<span class="string">"delete employee count=&#123;&#125;"</span>, agent.updateWith(<span class="string">"delete from employee"</span>).count());</div><div class="line"></div><div class="line">      log(<span class="string">"commit!"</span>);</div><div class="line">      agent.commit();</div><div class="line"></div><div class="line">      <span class="comment">// transaction (requiredNew)</span></div><div class="line">      agent.requiresNew(() -&gt; &#123;</div><div class="line"></div><div class="line">        log(<span class="string">"create new transaction."</span>);</div><div class="line">        <span class="comment">// batch insert (new v0.5.0)</span></div><div class="line">        log(<span class="string">"department/insert_department batch insert."</span>);</div><div class="line">        <span class="comment">// department</span></div><div class="line">        <span class="keyword">int</span> deptCount = agent.batch(<span class="string">"department/insert_department"</span>)</div><div class="line">            .paramStream(getDataByFile(Paths.get(<span class="string">"src/main/resources/data/department.tsv"</span>))).count();</div><div class="line">        log(<span class="string">"department/insert_department count=&#123;&#125;"</span>, deptCount);</div><div class="line"></div><div class="line">        log(<span class="string">"employee/insert_employee batch insert."</span>);</div><div class="line">        <span class="comment">// employee</span></div><div class="line">        <span class="comment">// execute by 2 rows</span></div><div class="line">        <span class="keyword">int</span> empCount = agent.batch(<span class="string">"employee/insert_employee"</span>)</div><div class="line">            .paramStream(getDataByFile(Paths.get(<span class="string">"src/main/resources/data/employee.tsv"</span>)))</div><div class="line">            .by((ctx, row) -&gt; ctx.batchCount() == <span class="number">2</span>).count();</div><div class="line">        log(<span class="string">"employee/insert_employee count=&#123;&#125;"</span>, empCount);</div><div class="line"></div><div class="line">        log(<span class="string">"relation/insert_dept_emp batch insert."</span>);</div><div class="line">        <span class="comment">// dept_emp</span></div><div class="line">        <span class="comment">// log message when batch execute.</span></div><div class="line">        <span class="keyword">int</span> deptEmpCount = agent.batch(<span class="string">"relation/insert_dept_emp"</span>)</div><div class="line">            .paramStream(getDataByFile(Paths.get(<span class="string">"src/main/resources/data/dept_emp.tsv"</span>)))</div><div class="line">            .batchWhen((agt, ctx) -&gt; log(<span class="string">"batch execute."</span>)).count();</div><div class="line">        log(<span class="string">"relation/insert_dept_emp count=&#123;&#125;"</span>, deptEmpCount);</div><div class="line"></div><div class="line">        log(<span class="string">"employee/select_employee in transaction select"</span>);</div><div class="line">        agent.query(<span class="string">"employee/select_employee"</span>).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line"></div><div class="line">        log(<span class="string">"transaction rollback!"</span>);</div><div class="line">        agent.setRollbackOnly();</div><div class="line">      &#125;);</div><div class="line"></div><div class="line">      agent.requiresNew(() -&gt; &#123;</div><div class="line">        <span class="comment">// insert with Entity</span></div><div class="line">        log(<span class="string">"insert with Entity"</span>);</div><div class="line">        Department informationDept = <span class="keyword">new</span> Department();</div><div class="line">        informationDept.setDeptNo(<span class="number">1005</span>);</div><div class="line">        informationDept.setDeptName(<span class="string">"information"</span>);</div><div class="line">        agent.insert(informationDept);</div><div class="line"></div><div class="line">        log(toS(agent.find(Department.class, <span class="number">1005</span>).get()));</div><div class="line"></div><div class="line">        <span class="comment">// update with Entity</span></div><div class="line">        log(<span class="string">"update with Entity"</span>);</div><div class="line">        informationDept.setDeptName(<span class="string">"Information System"</span>);</div><div class="line">        agent.update(informationDept);</div><div class="line"></div><div class="line">        log(toS(agent.find(Department.class, <span class="number">1005</span>).get()));</div><div class="line"></div><div class="line">        <span class="comment">// delete with Entity</span></div><div class="line">        log(<span class="string">"delete with Entity"</span>);</div><div class="line">        agent.delete(informationDept);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (!agent.find(Department.class, <span class="number">1005</span>).isPresent()) &#123;</div><div class="line">          log(<span class="string">"deptNo = 1005 deleted!!"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        log(<span class="string">"transaction rollback!"</span>);</div><div class="line">        agent.setRollbackOnly();</div><div class="line">      &#125;);</div><div class="line">      log(<span class="string">"employee/select_employee after transaction select. employee is empty."</span>);</div><div class="line">      agent.query(<span class="string">"employee/select_employee"</span>).stream().forEachOrdered(m -&gt; log(toS(m)));</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * Read TSV file data and convert to List Object.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@param</span> filePath TSV file path.</div><div class="line">   * <span class="doctag">@return</span> Data List</div><div class="line">   */</div><div class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Stream&lt;Map&lt;String, Object&gt;&gt; getDataByFile(<span class="keyword">final</span> Path filePath) &#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">      List&lt;String&gt; lines = Files.readAllLines(filePath);</div><div class="line">      String[] header = lines.get(<span class="number">0</span>).split(<span class="string">"\\t"</span>);</div><div class="line">      <span class="keyword">return</span> lines.stream()</div><div class="line">          .skip(<span class="number">1</span>)</div><div class="line">          .map(s -&gt; s.split(<span class="string">"\\t"</span>))</div><div class="line">          .map(data -&gt; IntStream.range(<span class="number">0</span>, header.length)</div><div class="line">              .&lt;Map&lt;String, Object&gt;&gt; collect(HashMap::<span class="keyword">new</span>, (row, i) -&gt; row.put(header[i], data[i]),</div><div class="line">                  Map::putAll));</div><div class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">      e.printStackTrace();</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> UncheckedIOException(e);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">toS</span><span class="params">(<span class="keyword">final</span> Object obj)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Map) &#123;</div><div class="line">      Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;) obj;</div><div class="line">      <span class="keyword">return</span> map.entrySet().stream()</div><div class="line">          .map(e -&gt; e.getKey() + <span class="string">"="</span> + e.getValue())</div><div class="line">          .collect(Collectors.joining(<span class="string">","</span>, <span class="string">"&#123;"</span>, <span class="string">"&#125;"</span>));</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> obj.toString();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(<span class="keyword">final</span> String format, <span class="keyword">final</span> Object... arguments)</span> </span>&#123;</div><div class="line">    log.info(format, arguments);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>実行ログ<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div></pre></td><td class="code"><pre><div class="line">[DEBUG] Start loading SQL template.[C:\git\uroborosql-sample\target\classes\sql]</div><div class="line">[DEBUG] Loading SQL template.[]</div><div class="line">[DEBUG] Loading SQL template.[ddl]</div><div class="line">[DEBUG] Loading SQL template.[department]</div><div class="line">[DEBUG] Loading SQL template.[employee]</div><div class="line">[DEBUG] Loading SQL template.[relation]</div><div class="line">[DEBUG] Loading SQL template.[setup]</div><div class="line">[DEBUG] Enum [name：CLS_GENDER_MALE, value：M] added to parameter.</div><div class="line">[DEBUG] Enum [name：CLS_GENDER_FEMALE, value：F] added to parameter.</div><div class="line">[DEBUG] Enum [name：CLS_GENDER_OTHER, value：O] added to parameter.</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">-- employee</div><div class="line">drop table if exists employee cascade;</div><div class="line">create table employee (</div><div class="line">  emp_no NUMBER(11) not null</div><div class="line">  , first_name VARCHAR(20) not null</div><div class="line">  , last_name VARCHAR(20) not null</div><div class="line">  , birth_date DATE not null</div><div class="line">  , gender CHAR(1) not null</div><div class="line">  , lock_version NUMBER(10) not null default 0</div><div class="line">  , constraint employee_PKC primary key (emp_no)</div><div class="line">) ;</div><div class="line">-- dept_emp</div><div class="line">drop table if exists dept_emp cascade;</div><div class="line">create table dept_emp (</div><div class="line">  emp_no NUMBER(11) not null</div><div class="line">  , dept_no NUMBER(4) not null</div><div class="line">  , constraint dept_emp_PKC primary key (emp_no,dept_no)</div><div class="line">) ;</div><div class="line">-- department</div><div class="line">drop table if exists department cascade;</div><div class="line">create table department (</div><div class="line">  dept_no NUMBER(4) not null</div><div class="line">  , dept_name VARCHAR(100) not null</div><div class="line">  , lock_version NUMBER(10) not null default 0</div><div class="line">  , constraint department_PKC primary key (dept_no)</div><div class="line">) ;</div><div class="line">comment on table employee is 'employee';</div><div class="line">comment on column employee.emp_no is 'emp_no';</div><div class="line">comment on column employee.first_name is 'first_name';</div><div class="line">comment on column employee.last_name is 'last_name';</div><div class="line">comment on column employee.birth_date is 'birth_date';</div><div class="line">comment on column employee.gender is 'gender   ''F''emale/''M''ale/''O''ther';</div><div class="line">comment on column employee.lock_version is 'lock_version';</div><div class="line">comment on table dept_emp is 'dept_emp';</div><div class="line">comment on column dept_emp.emp_no is 'emp_no';</div><div class="line">comment on column dept_emp.dept_no is 'dept_no';</div><div class="line">comment on table department is 'department';</div><div class="line">comment on column department.dept_no is 'dept_no';</div><div class="line">comment on column department.dept_name is 'dept_name';</div><div class="line">comment on column department.lock_version is 'lock_version'</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [ddl/create_tables] : [00:00:00.018]</div><div class="line">[INFO ] ddl/create_tables count=0</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">insert into department (dept_no, dept_name) values (1001, 'sales');</div><div class="line">insert into department (dept_no, dept_name) values (1002, 'export');</div><div class="line">insert into department (dept_no, dept_name) values (1003, 'accounting');</div><div class="line">insert into department (dept_no, dept_name) values (1004, 'personnel');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (0001, 'Bob', 'Smith', '1970-01-02', 'M');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (0002, 'Susan', 'Davis', '1969-02-10', 'F');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (0003, 'John', 'Wilson', '1982-05-08', 'M');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (0004, 'Sharon', 'Johnson', '1990-01-20', 'F');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (0005, 'Stephen', 'Taylor', '2003-12-31', 'M');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (0001, '1001');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (0002, '1001');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (0003, '1002');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (0004, '1003');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (0005, '1004')</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [setup/insert_data] : [00:00:00.007]</div><div class="line">[INFO ] setup/insert_data count=1</div><div class="line">[INFO ] select department data (collect)</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_no)], Result：[false], Parameter：[dept_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_name)], Result：[false], Parameter：[dept_name:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* department/select_department */</div><div class="line">  DEPT.DEPT_NO    AS  DEPT_NO</div><div class="line">, DEPT.DEPT_NAME    AS  DEPT_NAME</div><div class="line">, DEPT.LOCK_VERSION AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  DEPARTMENT  DEPT</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [department/select_department] : [00:00:00.005]</div><div class="line">[INFO ] &#123;deptNo=1001,deptName=sales,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;deptNo=1002,deptName=export,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;deptNo=1003,deptName=accounting,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;deptNo=1004,deptName=personnel,lockVersion=0&#125;</div><div class="line">[INFO ] select department data (collect) set param(dept_no=1001)</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_no)], Result：[true], Parameter：[dept_no:[1001]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_name)], Result：[false], Parameter：[dept_name:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* department/select_department */</div><div class="line">  DEPT.DEPT_NO    AS  DEPT_NO</div><div class="line">, DEPT.DEPT_NAME    AS  DEPT_NAME</div><div class="line">, DEPT.LOCK_VERSION AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  DEPARTMENT  DEPT</div><div class="line">WHERE</div><div class="line">DEPT.DEPT_NO  = ?/*dept_no*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[dept_no], Value[1001], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [department/select_department] : [00:00:00.000]</div><div class="line">[INFO ] &#123;deptNo=1001,deptName=sales,lockVersion=0&#125;</div><div class="line">[INFO ] select department data with Entity (collect)</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[false], Parameter：[deptNo:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Department [deptNo=1001, deptName=sales, lockVersion=0]</div><div class="line">[INFO ] Department [deptNo=1002, deptName=export, lockVersion=0]</div><div class="line">[INFO ] Department [deptNo=1003, deptName=accounting, lockVersion=0]</div><div class="line">[INFO ] Department [deptNo=1004, deptName=personnel, lockVersion=0]</div><div class="line">[INFO ] select department data with Entity (collect) set param(deptNo=1001)</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[true], Parameter：[deptNo:[1001]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1001], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Department [deptNo=1001, deptName=sales, lockVersion=0]</div><div class="line">[INFO ] select department data by key (find)</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[true], Parameter：[deptNo:[1002]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1002], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Department [deptNo=1002, deptName=export, lockVersion=0]</div><div class="line">[INFO ] select first employee data.(Optional)</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=1,firstName=Bob,lastName=Smith,birthDate=1970-01-02,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] select employee data (stream)</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=1,firstName=Bob,lastName=Smith,birthDate=1970-01-02,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=2,firstName=Susan,lastName=Davis,birthDate=1969-02-10,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=3,firstName=John,lastName=Wilson,birthDate=1982-05-08,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=4,firstName=Sharon,lastName=Johnson,birthDate=1990-01-20,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=5,firstName=Stephen,lastName=Taylor,birthDate=2003-12-31,gender=M,lockVersion=0&#125;</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[true], Parameter：[birth_date_from:[1990,1,1]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line">WHERE</div><div class="line">EMP.BIRTH_DATE  &gt;=  ?/*birth_date_from*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[birth_date_from], Value[1990-01-01], Class[LocalDate]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=4,firstName=Sharon,lastName=Johnson,birthDate=1990-01-20,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=5,firstName=Stephen,lastName=Taylor,birthDate=2003-12-31,gender=M,lockVersion=0&#125;</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[true], Parameter：[gender_list:[&#123;F&#125;]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line">WHERE</div><div class="line">EMP.GENDER    IN  (?)/*gender_list*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[gender_list], Value[[Ljava.lang.Object;@69e9510a], Class[Object[]]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=2,firstName=Susan,lastName=Davis,birthDate=1969-02-10,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=4,firstName=Sharon,lastName=Johnson,birthDate=1990-01-20,gender=F,lockVersion=0&#125;</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[true], Parameter：[female:[true],female:[true]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line">WHERE</div><div class="line">EMP.GENDER    = 'F'/*#CLS_GENDER_FEMALE*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=2,firstName=Susan,lastName=Davis,birthDate=1969-02-10,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=4,firstName=Sharon,lastName=Johnson,birthDate=1990-01-20,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] select employee data with Entity (stream)</div><div class="line">[DEBUG] Evaluation Expression：[empNo != null], Result：[false], Parameter：[empNo:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(firstName)], Result：[false], Parameter：[firstName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(lastName)], Result：[false], Parameter：[lastName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[birthDate != null], Result：[false], Parameter：[birthDate:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(gender)], Result：[false], Parameter：[gender:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Employee */</div><div class="line">   EMP_NO AS  EMP_NO  -- emp_no</div><div class="line">  , FIRST_NAME  AS  FIRST_NAME  -- first_name</div><div class="line">  , LAST_NAME AS  LAST_NAME -- last_name</div><div class="line">  , BIRTH_DATE  AS  BIRTH_DATE  -- birth_date</div><div class="line">  , GENDER  AS  GENDER  -- gender  'F'emale/'M'ale/'O'ther</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.EMPLOYEE</div><div class="line">ORDER BY </div><div class="line">   EMP_NO</div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Employee [empNo=1, firstName=Bob, lastName=Smith, birthDate=1970-01-02, gender=M, lockVersion=0]</div><div class="line">[INFO ] Employee [empNo=2, firstName=Susan, lastName=Davis, birthDate=1969-02-10, gender=F, lockVersion=0]</div><div class="line">[INFO ] Employee [empNo=3, firstName=John, lastName=Wilson, birthDate=1982-05-08, gender=M, lockVersion=0]</div><div class="line">[INFO ] Employee [empNo=4, firstName=Sharon, lastName=Johnson, birthDate=1990-01-20, gender=F, lockVersion=0]</div><div class="line">[INFO ] Employee [empNo=5, firstName=Stephen, lastName=Taylor, birthDate=2003-12-31, gender=M, lockVersion=0]</div><div class="line">[DEBUG] Evaluation Expression：[empNo != null], Result：[false], Parameter：[empNo:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(firstName)], Result：[false], Parameter：[firstName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(lastName)], Result：[false], Parameter：[lastName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[birthDate != null], Result：[true], Parameter：[birthDate:[1970,1,2]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(gender)], Result：[false], Parameter：[gender:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Employee */</div><div class="line">   EMP_NO AS  EMP_NO  -- emp_no</div><div class="line">  , FIRST_NAME  AS  FIRST_NAME  -- first_name</div><div class="line">  , LAST_NAME AS  LAST_NAME -- last_name</div><div class="line">  , BIRTH_DATE  AS  BIRTH_DATE  -- birth_date</div><div class="line">  , GENDER  AS  GENDER  -- gender  'F'emale/'M'ale/'O'ther</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.EMPLOYEE</div><div class="line">WHERE</div><div class="line">  BIRTH_DATE = ?/*birthDate*/</div><div class="line">ORDER BY </div><div class="line">   EMP_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[birthDate], Value[1970-01-02], Class[LocalDate]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Employee [empNo=1, firstName=Bob, lastName=Smith, birthDate=1970-01-02, gender=M, lockVersion=0]</div><div class="line">[DEBUG] Evaluation Expression：[empNo != null], Result：[false], Parameter：[empNo:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(firstName)], Result：[false], Parameter：[firstName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(lastName)], Result：[false], Parameter：[lastName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[birthDate != null], Result：[false], Parameter：[birthDate:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(gender)], Result：[true], Parameter：[gender:[F,FEMALE,1]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Employee */</div><div class="line">   EMP_NO AS  EMP_NO  -- emp_no</div><div class="line">  , FIRST_NAME  AS  FIRST_NAME  -- first_name</div><div class="line">  , LAST_NAME AS  LAST_NAME -- last_name</div><div class="line">  , BIRTH_DATE  AS  BIRTH_DATE  -- birth_date</div><div class="line">  , GENDER  AS  GENDER  -- gender  'F'emale/'M'ale/'O'ther</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.EMPLOYEE</div><div class="line">WHERE</div><div class="line">  GENDER = ?/*gender*/</div><div class="line">ORDER BY </div><div class="line">   EMP_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[gender], Value[F], Class[Gender]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Employee [empNo=2, firstName=Susan, lastName=Davis, birthDate=1969-02-10, gender=F, lockVersion=0]</div><div class="line">[INFO ] Employee [empNo=4, firstName=Sharon, lastName=Johnson, birthDate=1990-01-20, gender=F, lockVersion=0]</div><div class="line">[INFO ] delete tables with sql literal</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">delete from dept_emp</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] delete dept_emp count=5</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">delete from department</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] delete department count=4</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">delete from employee</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] delete employee count=5</div><div class="line">[INFO ] commit!</div><div class="line">[INFO ] create new transaction.</div><div class="line">[INFO ] department/insert_department batch insert.</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* department/insert_department */</div><div class="line">INTO</div><div class="line">  DEPARTMENT</div><div class="line">(</div><div class="line">  DEPT_NO</div><div class="line">, DEPT_NAME</div><div class="line">, LOCK_VERSION</div><div class="line">) VALUES (</div><div class="line">  ?/*dept_no*/</div><div class="line">, ?/*dept_name*/</div><div class="line">, 0</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] 4 items Added for batch process.</div><div class="line">[DEBUG] Execute batch process.</div><div class="line">[DEBUG] SQL execution time [department/insert_department] : [00:00:00.001]</div><div class="line">[INFO ] department/insert_department count=4</div><div class="line">[INFO ] employee/insert_employee batch insert.</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* employee/insert_employee */</div><div class="line">INTO</div><div class="line">  EMPLOYEE</div><div class="line">(</div><div class="line">  EMP_NO</div><div class="line">, FIRST_NAME</div><div class="line">, LAST_NAME</div><div class="line">, BIRTH_DATE</div><div class="line">, GENDER</div><div class="line">, LOCK_VERSION</div><div class="line">) VALUES (</div><div class="line">  ?/*emp_no*/</div><div class="line">, ?/*first_name*/</div><div class="line">, ?/*last_name*/</div><div class="line">, ?/*birth_date*/</div><div class="line">, ?/*gender*/</div><div class="line">, 0</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] 2 items Added for batch process.</div><div class="line">[DEBUG] Execute batch process.</div><div class="line">[DEBUG] SQL execution time [employee/insert_employee] : [00:00:00.000]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* employee/insert_employee */</div><div class="line">INTO</div><div class="line">  EMPLOYEE</div><div class="line">(</div><div class="line">  EMP_NO</div><div class="line">, FIRST_NAME</div><div class="line">, LAST_NAME</div><div class="line">, BIRTH_DATE</div><div class="line">, GENDER</div><div class="line">, LOCK_VERSION</div><div class="line">) VALUES (</div><div class="line">  ?/*emp_no*/</div><div class="line">, ?/*first_name*/</div><div class="line">, ?/*last_name*/</div><div class="line">, ?/*birth_date*/</div><div class="line">, ?/*gender*/</div><div class="line">, 0</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] 2 items Added for batch process.</div><div class="line">[DEBUG] Execute batch process.</div><div class="line">[DEBUG] SQL execution time [employee/insert_employee] : [00:00:00.000]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* employee/insert_employee */</div><div class="line">INTO</div><div class="line">  EMPLOYEE</div><div class="line">(</div><div class="line">  EMP_NO</div><div class="line">, FIRST_NAME</div><div class="line">, LAST_NAME</div><div class="line">, BIRTH_DATE</div><div class="line">, GENDER</div><div class="line">, LOCK_VERSION</div><div class="line">) VALUES (</div><div class="line">  ?/*emp_no*/</div><div class="line">, ?/*first_name*/</div><div class="line">, ?/*last_name*/</div><div class="line">, ?/*birth_date*/</div><div class="line">, ?/*gender*/</div><div class="line">, 0</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] 1 items Added for batch process.</div><div class="line">[DEBUG] Execute batch process.</div><div class="line">[DEBUG] SQL execution time [employee/insert_employee] : [00:00:00.000]</div><div class="line">[INFO ] employee/insert_employee count=5</div><div class="line">[INFO ] relation/insert_dept_emp batch insert.</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* relation/insert_dept_emp */</div><div class="line">INTO</div><div class="line">  DEPT_EMP</div><div class="line">(</div><div class="line">  EMP_NO</div><div class="line">, DEPT_NO</div><div class="line">) VALUES (</div><div class="line">  ?/*emp_no*/</div><div class="line">, ?/*dept_no*/</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] 5 items Added for batch process.</div><div class="line">[DEBUG] Execute batch process.</div><div class="line">[DEBUG] SQL execution time [relation/insert_dept_emp] : [00:00:00.000]</div><div class="line">[INFO ] batch execute.</div><div class="line">[INFO ] relation/insert_dept_emp count=5</div><div class="line">[INFO ] employee/select_employee in transaction select</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO ] &#123;empNo=1,firstName=Bob,lastName=Smith,birthDate=1970-01-02,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=2,firstName=Susan,lastName=Davis,birthDate=1969-02-10,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=3,firstName=John,lastName=Wilson,birthDate=1982-05-08,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=4,firstName=Sharon,lastName=Johnson,birthDate=1990-01-20,gender=F,lockVersion=0&#125;</div><div class="line">[INFO ] &#123;empNo=5,firstName=Stephen,lastName=Taylor,birthDate=2003-12-31,gender=M,lockVersion=0&#125;</div><div class="line">[INFO ] transaction rollback!</div><div class="line">[INFO ] insert with Entity</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">INSERT /* mapping @ Department */ INTO PUBLIC.DEPARTMENT(</div><div class="line">   DEPT_NO</div><div class="line">  , DEPT_NAME</div><div class="line">  , LOCK_VERSION</div><div class="line">) VALUES (</div><div class="line">   ?/*deptNo*/</div><div class="line">  , ?/*deptName*/</div><div class="line">  , ?/*lockVersion*/</div><div class="line">)</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1005], Class[Long]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[2], Parameter name[deptName], Value[information], Class[String]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[3], Parameter name[lockVersion], Value[0], Class[Long]]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[true], Parameter：[deptNo:[1005]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1005], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Department [deptNo=1005, deptName=information, lockVersion=0]</div><div class="line">[INFO ] update with Entity</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">UPDATE /* mapping @ Department */ PUBLIC.DEPARTMENT SET </div><div class="line">   DEPT_NO = ?/*deptNo*/</div><div class="line">  , DEPT_NAME = ?/*deptName*/</div><div class="line">  , LOCK_VERSION = ?/*lockVersion*/ + 1</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">  AND LOCK_VERSION = ?/*lockVersion*/</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1005], Class[Long]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[2], Parameter name[deptName], Value[Information System], Class[String]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[3], Parameter name[lockVersion], Value[0], Class[Long]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[4], Parameter name[deptNo], Value[1005], Class[Long]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[5], Parameter name[lockVersion], Value[0], Class[Long]]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[true], Parameter：[deptNo:[1005]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1005], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] Department [deptNo=1005, deptName=Information System, lockVersion=1]</div><div class="line">[INFO ] delete with Entity</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">DELETE /* mapping @ Department */ FROM PUBLIC.DEPARTMENT</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[DEBUG] Evaluation Expression：[deptNo != null], Result：[true], Parameter：[deptNo:[1005]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(deptName)], Result：[false], Parameter：[deptName:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[lockVersion != null], Result：[false], Parameter：[lockVersion:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* mapping @ Department */</div><div class="line">   DEPT_NO  AS  DEPT_NO -- dept_no</div><div class="line">  , DEPT_NAME AS  DEPT_NAME -- dept_name</div><div class="line">  , LOCK_VERSION  AS  LOCK_VERSION  -- lock_version</div><div class="line">FROM PUBLIC.DEPARTMENT</div><div class="line">WHERE</div><div class="line">  DEPT_NO = ?/*deptNo*/</div><div class="line">ORDER BY </div><div class="line">   DEPT_NO</div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[deptNo], Value[1005], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [null] : [00:00:00.000]</div><div class="line">[INFO ] deptNo = 1005 deleted!!</div><div class="line">[INFO ] transaction rollback!</div><div class="line">[INFO ] employee/select_employee after transaction select. employee is empty.</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(emp_no)], Result：[false], Parameter：[emp_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(first_name)], Result：[false], Parameter：[first_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(last_name)], Result：[false], Parameter：[last_name:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_from)], Result：[false], Parameter：[birth_date_from:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(birth_date_to)], Result：[false], Parameter：[birth_date_to:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[gender_list != null], Result：[false], Parameter：[gender_list:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[female != null and female], Result：[false], Parameter：[female:[null],female:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* employee/select_employee */</div><div class="line">  EMP.EMP_NO      AS  EMP_NO</div><div class="line">, EMP.FIRST_NAME    AS  FIRST_NAME</div><div class="line">, EMP.LAST_NAME   AS  LAST_NAME</div><div class="line">, EMP.BIRTH_DATE    AS  BIRTH_DATE</div><div class="line">, EMP.GENDER      AS  GENDER</div><div class="line">, EMP.LOCK_VERSION  AS  LOCK_VERSION</div><div class="line">FROM</div><div class="line">  EMPLOYEE  EMP</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[DEBUG] SQL execution time [employee/select_employee] : [00:00:00.000]</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] BUILD SUCCESS</div><div class="line">[INFO] ------------------------------------------------------------------------</div><div class="line">[INFO] Total time: 1.510 s</div><div class="line">[INFO] Finished at: XXXX-XX-XXT13:56:04+09:00</div><div class="line">[INFO] Final Memory: 15M/361M</div><div class="line">[INFO] ------------------------------------------------------------------------</div></pre></td></tr></table></figure></p>
<h2 id="サンプルプロジェクトの構成"><a href="#サンプルプロジェクトの構成" class="headerlink" title="サンプルプロジェクトの構成"></a>サンプルプロジェクトの構成</h2><p>ではサンプルアプリケーションの構成を見ていきましょう。</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">uroborosql-sample</div><div class="line">  ├─REPL</div><div class="line">  │  └─repl.properties</div><div class="line">  └─src</div><div class="line"><span class="code">     └─main</span></div><div class="line"><span class="code">        ├─java</span></div><div class="line"><span class="code">        │  └─jp</span></div><div class="line"><span class="code">        │      └─co</span></div><div class="line"><span class="code">        │          └─future</span></div><div class="line"><span class="code">        │              └─uroborosql</span></div><div class="line"><span class="code">        │                  └─sample</span></div><div class="line"><span class="code">        │                      └─Main.java</span></div><div class="line"><span class="code">        │                      └─entity</span></div><div class="line"><span class="code">        │                      │   └─Department.java</span></div><div class="line"><span class="code">        │                      │   └─Employee.java</span></div><div class="line"><span class="code">        │                      └─type</span></div><div class="line"><span class="code">        │                          └─Gender.java</span></div><div class="line"><span class="code">        └─resources</span></div><div class="line"><span class="code">            ├─logback.xml</span></div><div class="line"><span class="code">            ├─data</span></div><div class="line"><span class="code">            │   ├─department.tsv</span></div><div class="line"><span class="code">            │   ├─dept_emp.tsv</span></div><div class="line"><span class="code">            │   └─employee.tsv</span></div><div class="line"><span class="code">            └─sql</span></div><div class="line"><span class="code">                ├─ddl</span></div><div class="line"><span class="code">                │   └─create_tables.sql</span></div><div class="line"><span class="code">                └─setup</span></div><div class="line"><span class="code">                │   └─insert_data.sql</span></div><div class="line"><span class="code">                ├─department</span></div><div class="line"><span class="code">                │   ├─insert_department.sql</span></div><div class="line"><span class="code">                │   └─select_department.sql</span></div><div class="line"><span class="code">                ├─employee</span></div><div class="line"><span class="code">                │   ├─insert_employee.sql</span></div><div class="line"><span class="code">                │   └─select_employee.sql</span></div><div class="line"><span class="code">                └─relation</span></div><div class="line"><span class="code">                    └─insert_dept_emp.sql</span></div></pre></td></tr></table></figure>
<p>主要なファイルの説明です</p>
<table>
<thead>
<tr>
<th style="text-align:left">ファイル</th>
<th style="text-align:left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Main.java</td>
<td style="text-align:left">uroborosql-sampleのメインプログラムです。</td>
</tr>
<tr>
<td style="text-align:left">Department.java / Employee.java</td>
<td style="text-align:left">テーブル構造を表すEntityクラスです。メインプログラムの中で使用します。</td>
</tr>
<tr>
<td style="text-align:left">Gender.java</td>
<td style="text-align:left">性別を表すEnumクラスです。メインプログラムの中で使用します。</td>
</tr>
<tr>
<td style="text-align:left">sqlフォルダ配下のSQL</td>
<td style="text-align:left">uroborosqlで実行するSQLファイルです。</td>
</tr>
<tr>
<td style="text-align:left">dataフォルダ配下のTSV</td>
<td style="text-align:left">テーブルデータ作成用のTSVファイルです。Mainクラスの中でテーブルへの一括データ投入を行う際のデータとして利用します。</td>
</tr>
<tr>
<td style="text-align:left">logback.xml</td>
<td style="text-align:left">ログ出力設定ファイルです。</td>
</tr>
</tbody>
</table>
<h2 id="SQLの実行方法"><a href="#SQLの実行方法" class="headerlink" title="SQLの実行方法"></a>SQLの実行方法</h2><p>Main.javaを見ていきましょう。</p>
<p>mainメソッドの中で最初にSqlConfigクラスを作成しています。<br>ここでは<a href="http://www.h2database.com/html/main.html" target="_blank" rel="external">H2DB</a>のメモリDBに接続するSqlConfigインスタンスを生成しています。<br>SqlConfigの生成にはUroboroSQLクラスによるBuilderAPIを使用します。</p>
<ul>
<li>基本的な呼出方法（DBへの接続情報のみ指定）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create SqlConfig</span></div><div class="line">SqlConfig config = UroboroSQL.builder(<span class="string">"jdbc:h2:mem:test;DB_CLOSE_DELAY=-1"</span>, <span class="string">"sa"</span>, <span class="string">""</span>).build();</div></pre></td></tr></table></figure>
<ul>
<li>設定のカスタマイズ（定数の指定や検索結果の取得方法変更）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create SqlConfig</span></div><div class="line">SqlConfig config = UroboroSQL</div><div class="line">    .builder(<span class="string">"jdbc:h2:mem:test;DB_CLOSE_DELAY=-1"</span>, <span class="string">"sa"</span>, <span class="string">""</span>)</div><div class="line">      <span class="comment">// SqlContextFactoryの設定（Enum定数パッケージ設定の追加）</span></div><div class="line">      .setSqlContextFactory(<span class="keyword">new</span> SqlContextFactoryImpl()</div><div class="line">        .setEnumConstantPackageNames(Arrays.asList(Gender.class.getPackage().getName())))</div><div class="line">      <span class="comment">// SqlAgentFactoryの設定（Queryの戻り値のMapのキー文字列のデフォルトCaseFormat設定の追加）</span></div><div class="line">      .setSqlAgentFactory(<span class="keyword">new</span> SqlAgentFactoryImpl().setDefaultMapKeyCaseFormat(CaseFormat.CAMEL_CASE))</div><div class="line">    .build();</div></pre></td></tr></table></figure>
<p>SqlConfig生成時のカスタマイズの詳細については <a href="../advanced">高度な操作</a>を参照してください。</p>
<p>次に生成したSqlConfigからuroboroSQLの中核となるクラスであるSqlAgentを生成します。<br>uroboroSQLのそれぞれの処理はSqlAgentを使って呼び出します。<br>SqlAgentはAutoClosableインタフェースを実装しているので、try-with-resources文で囲むことで処理終了時にクローズされます。<br>このときSqlAgentの中に保持するConnectionなどもクローズされるため、クローズ漏れによるメモリリークを防ぐことができます。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create SqlAgent. SqlAgent implements AutoClosable.</span></div><div class="line"><span class="keyword">try</span> (SqlAgent agent = config.agent()) &#123;</div><div class="line">  <span class="comment">// ここにSQL発行の処理を実装する</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以降の処理はtry-with-resourcesの中で行います。</p>
<p>接続したDBにテーブルを作成と初期データの登録を行います。<br>uroboroSQLでは実行するSQLをファイルパスに似た表現（<code>SQL名</code>と呼ぶ）で指定します。<br>下の例ではクラスパス上にあるsqlフォルダ配下のddl/create_tables.sqlを指定してSQL更新処理を実行します。</p>
<p>更新処理を行う場合、<code>SqlAgent#update(&quot;[SQL名]&quot;)</code>メソッドを使用してSqlUpdateを取得し、続けてバインドパラメータの設定や<br>Updateの実行を行います。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create table :  テーブル作成</span></div><div class="line">agent.update(<span class="string">"ddl/create_tables"</span>).count();</div><div class="line"><span class="comment">// setup data : 初期データ挿入</span></div><div class="line">agent.update(<span class="string">"setup/insert_data"</span>).count();</div></pre></td></tr></table></figure>
<p>ddl/create_tables.sqlで作成したテーブルの構成は以下になります。<br><img src="erd.png" alt="ERD" title="テーブル構成"></p>
<p>登録したデータを検索してみましょう。<br>検索を行う際は、<code>SqlAgent#query(&quot;[SQL名]&quot;)</code>メソッドを使用してSqlQueryを取得し、続けてバインドパラメータの設定や<br>Queryの実行を行います。</p>
<p>uroboroSQLでは検索結果をいくつかの形式で取得することができます。</p>
<table>
<thead>
<tr>
<th style="text-align:left">メソッド</th>
<th style="text-align:left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">SqlQuery#collect()</td>
<td style="text-align:left">検索結果の各行をMapに詰めたListの形式で取得する</td>
</tr>
<tr>
<td style="text-align:left">SqlQuery#stream()</td>
<td style="text-align:left">検索結果をJava8で追加されたStreamの形式で取得する</td>
</tr>
<tr>
<td style="text-align:left">SqlQuery#resultSet()</td>
<td style="text-align:left">検索結果のResultSetを取得する</td>
</tr>
<tr>
<td style="text-align:left">SqlQuery#first()</td>
<td style="text-align:left">検索結果の１件目を取得する。取得できない場合はRuntimeException</td>
</tr>
<tr>
<td style="text-align:left">SqlQuery#findFirst()</td>
<td style="text-align:left">検索結果の１件目を取得する。戻り値はOptional</td>
</tr>
</tbody>
</table>
<p>例えば、以下のように呼び出します。</p>
<ul>
<li>検索結果の各行をMapに詰めたListの形式で取得する</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Map&lt;String, Object&gt;&gt; departments = agent.query(<span class="string">"department/select_department"</span>)</div><div class="line">  .param(<span class="string">"dept_no"</span>, <span class="number">1001</span>)</div><div class="line">  .collect();</div></pre></td></tr></table></figure>
<ul>
<li>検索結果をJava8で追加されたStreamの形式で取得する</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">agent.query(<span class="string">"employee/select_employee"</span>)</div><div class="line">  .paramList(<span class="string">"gender_list"</span>, Gender.FEMALE, Gender.MALE)</div><div class="line">  .stream().forEach(m -&gt; log(toS(m)));</div></pre></td></tr></table></figure>
<p>ここで実行されるSQLは以下のようになっています。</p>
<ul>
<li>department/select_department.sql</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span></div><div class="line"><span class="comment">/* _SQL_ID_ */</span></div><div class="line">  DEPT.DEPT_NO  <span class="keyword">AS</span>  DEPT_NO</div><div class="line">,  DEPT.DEPT_NAME  <span class="keyword">AS</span>  DEPT_NAME</div><div class="line"><span class="keyword">FROM</span></div><div class="line">  DEPARTMENT  DEPT</div><div class="line"><span class="keyword">WHERE</span></div><div class="line">  <span class="number">1</span>        =  <span class="number">1</span></div><div class="line"><span class="comment">/*IF SF.isNotEmpty(dept_no)*/</span></div><div class="line"><span class="keyword">AND</span>  DEPT.DEPT_NO  =  <span class="comment">/*dept_no*/</span><span class="number">1</span></div><div class="line"><span class="comment">/*END*/</span></div><div class="line"><span class="comment">/*IF SF.isNotEmpty(dept_name)*/</span></div><div class="line"><span class="keyword">AND</span>  DEPT.DEPT_NAME  =  <span class="comment">/*dept_name*/</span><span class="string">'sample'</span></div><div class="line"><span class="comment">/*END*/</span></div></pre></td></tr></table></figure>
<ul>
<li><code>/* _SQL_ID_ */</code> はSQLを特定するID(SQL_IDといいます)を付与するための予約語で、実行時にSQLファイルを特定するための文字列に変換されます。</li>
<li><code>/*IF*/ ... /*END*/</code>は条件分岐で、IFの後ろの評価結果が<code>True</code>となる場合に<code>/*IF*/</code>と<code>/*END*/</code>で囲まれた部分が出力されます。</li>
<li><code>/*dept_no*/</code>はバインドパラメータで、実行時に<code>?</code>に変換され、SqlQueryに設定したパラメータがSQLへバインドされます。</li>
<li><code>/*dept_no*/</code>の後ろの<code>1</code>はテスト用データです。このようにテスト用データをSQL文に記述しておくことで、このSQLを<br>SQLクライアントツールで実行する際にエラーにならずに文法の確認を行うことができます。</li>
</ul>
<p>SQLで使用できる構文の詳細については<a href="../basics/#2WaySQL">2WaySQL</a>を参照してください。</p>
<p>処理結果のCommitやRollbackもSqlAgent経由で行います。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// commit</span></div><div class="line">agent.commit();</div><div class="line"></div><div class="line"><span class="comment">// rollback</span></div><div class="line">agent.rollback();</div></pre></td></tr></table></figure>
<p>uroboroSQLでは、これらの基本的な操作のほか、バッチ処理やトランザクション処理なども行うことができます。<br>詳細については<a href="../basics/#基本操作">基本操作</a>を参照してください。</p>
<h2 id="SQL-REPL"><a href="#SQL-REPL" class="headerlink" title="SQL-REPL"></a>SQL-REPL</h2><p>ここまではJavaアプリケーションからuroboroSQLを利用する場合の説明でした。<br>uroboroSQLにはもう一つ特徴的な機能として、SQLを対話しながら実行するためのREPL機能を提供しています。</p>
<p>今度はこのREPL機能を利用してみましょう。</p>
<p>REPLを起動するためには<code>jp.co.future.uroborosql.client.SqlREPL</code>クラスを実行する必要があります。<br>サンプルアプリケーションでSqlREPLクラスを実行するためには以下のコマンドを実行します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn -PREPL</div></pre></td></tr></table></figure></p>
<p>実行すると以下のようにタイトル表示とコマンド説明、設定値の情報が表示され、そのあとコマンド入力状態になります。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">===========================================================</div><div class="line">                 _                    ____   ___  _</div><div class="line"> _   _ _ __ ___ | |__   ___  _ __ ___/ ___| / _ \| |</div><div class="line">| | | | '__/ _ \| '_ \ / _ \| '__/ _ \___ \| | | | |</div><div class="line">| |_| | | | (_) | |_) | (_) | | | (_) |__) | |_| | |___</div><div class="line"> \__,_|_|  \___/|_.__/ \___/|_|  \___/____/ \__\_\_____|</div><div class="line"></div><div class="line">uroboroSQL SQL REPL <span class="built_in">ver</span>.<span class="number">0</span>.<span class="number">5</span>.<span class="number">0</span></div><div class="line">===========================================================</div><div class="line"></div><div class="line">Commands :</div><div class="line">        query   : execute query from loaded sql file.</div><div class="line">                ex1) query [sql file name]&lt;Enter&gt; : Execute SQL without parameter.</div><div class="line">                ex2) query [sql file name] param1=val1 param2=val2 ...&lt;Enter&gt; : Execute SQL with the specified parameters.</div><div class="line">        update  : execute update from loaded sql file.</div><div class="line">                ex1) update [sql file name]&lt;Enter&gt; : Execute SQL without parameter.</div><div class="line">                ex2) update [sql file name] param1=val1 param2=val2 ...&lt;Enter&gt; : Execute SQL with the specified parameters.</div><div class="line">        view    : view sql file.</div><div class="line">                ex) view [sql file name]&lt;Enter&gt; : Show sql file contents.</div><div class="line">        list    : list loaded sql files.</div><div class="line">                ex1) list&lt;Enter&gt; : Show all loaded sql file(s).</div><div class="line">                ex2) list keyword&lt;Enter&gt; : Show loaded sql file(s) filter by keyword.</div><div class="line">        history : list command history.</div><div class="line">                ex1) history&lt;Enter&gt; : Show all command history.</div><div class="line">                ex2) history keyword&lt;Enter&gt; : Show command history filter by keyword.</div><div class="line">        driver  : list loaded drivers.</div><div class="line">        reload  : reload sql files.</div><div class="line">        <span class="built_in">cls</span>     : clear screen.</div><div class="line">        <span class="built_in">help</span>    : show this message.</div><div class="line">        <span class="keyword">exit</span>    : <span class="keyword">exit</span> SQL REPL. `CTRL+C` is an alias.</div><div class="line"></div><div class="line">[Properties]</div><div class="line">db.url=jdbc:h2:file:./target/db/repldb;</div><div class="line">sql.additionalClassPath=src/main/resources;$&#123;user.home&#125;/.m2/repository/com/h2database/h2/<span class="number">1</span>.<span class="number">4</span>.<span class="number">192</span>/h2-<span class="number">1</span>.<span class="number">4</span>.<span class="number">192</span>.jar</div><div class="line">db.user=sa</div><div class="line">db.password=</div><div class="line"></div><div class="line">uroborosql &gt;</div></pre></td></tr></table></figure>
<p>まずは<code>help[Enter]</code>と入力してみましょう。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; <span class="built_in">help</span>[Enter]</div><div class="line"><span class="function">HELP:</span></div><div class="line">===========================================================</div><div class="line">                 <span class="title">_</span>                    <span class="title">____</span>   <span class="title">___</span>  <span class="title">_</span></div><div class="line"> <span class="title">_</span>   <span class="title">_</span> <span class="title">_</span> <span class="title">__</span> <span class="title">___</span> | |<span class="title">__</span>   <span class="title">___</span>  <span class="title">_</span> <span class="title">__</span> <span class="title">___</span>/ <span class="title">___</span>| / <span class="title">_</span> \| |</div><div class="line">| | | | '<span class="title">__</span>/ <span class="title">_</span> \| '<span class="title">_</span> \ / <span class="title">_</span> \| '<span class="title">__</span>/ <span class="title">_</span> \<span class="title">___</span> \| | | | |</div><div class="line">| |<span class="title">_</span>| | | | (<span class="title">_</span>) | |<span class="title">_</span>) | (<span class="title">_</span>) | | | (<span class="title">_</span>) |<span class="title">__</span>) | |<span class="title">_</span>| | |<span class="title">___</span></div><div class="line"> \<span class="title">__</span>,<span class="title">_</span>|<span class="title">_</span>|  \<span class="title">___</span>/|<span class="title">_.__</span>/ \<span class="title">___</span>/|<span class="title">_</span>|  \<span class="title">___</span>/<span class="title">____</span>/ \<span class="title">__</span>\<span class="title">_</span>\<span class="title">_____</span>|</div><div class="line"></div><div class="line"><span class="title">uroboroSQL</span> <span class="title">SQL</span> <span class="title">REPL</span> <span class="title">ver</span>.0.5.0</div><div class="line">===========================================================</div><div class="line"></div><div class="line"><span class="title">Commands</span> :</div><div class="line">        <span class="title">query</span>   : <span class="title">execute</span> <span class="title">query</span> <span class="title">from</span> <span class="title">loaded</span> <span class="title">sql</span> <span class="title">file</span>.</div><div class="line">                <span class="title">ex1</span>) <span class="title">query</span> [<span class="title">sql</span> <span class="title">file</span> <span class="title">name</span>]&lt;<span class="title">Enter</span>&gt; : <span class="title">Execute</span> <span class="title">SQL</span> <span class="title">without</span> <span class="title">parameter</span>.</div><div class="line">                <span class="title">ex2</span>) <span class="title">query</span> [<span class="title">sql</span> <span class="title">file</span> <span class="title">name</span>] <span class="title">param1</span>=<span class="title">val1</span> <span class="title">param2</span>=<span class="title">val2</span> ...&lt;<span class="title">Enter</span>&gt; : <span class="title">Execute</span> <span class="title">SQL</span> <span class="title">with</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">parameters</span>.</div><div class="line">        <span class="title">update</span>  : <span class="title">execute</span> <span class="title">update</span> <span class="title">from</span> <span class="title">loaded</span> <span class="title">sql</span> <span class="title">file</span>.</div><div class="line">                <span class="title">ex1</span>) <span class="title">update</span> [<span class="title">sql</span> <span class="title">file</span> <span class="title">name</span>]&lt;<span class="title">Enter</span>&gt; : <span class="title">Execute</span> <span class="title">SQL</span> <span class="title">without</span> <span class="title">parameter</span>.</div><div class="line">                <span class="title">ex2</span>) <span class="title">update</span> [<span class="title">sql</span> <span class="title">file</span> <span class="title">name</span>] <span class="title">param1</span>=<span class="title">val1</span> <span class="title">param2</span>=<span class="title">val2</span> ...&lt;<span class="title">Enter</span>&gt; : <span class="title">Execute</span> <span class="title">SQL</span> <span class="title">with</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">parameters</span>.</div><div class="line">        <span class="title">view</span>    : <span class="title">view</span> <span class="title">sql</span> <span class="title">file</span>.</div><div class="line">                <span class="title">ex</span>) <span class="title">view</span> [<span class="title">sql</span> <span class="title">file</span> <span class="title">name</span>]&lt;<span class="title">Enter</span>&gt; : <span class="title">Show</span> <span class="title">sql</span> <span class="title">file</span> <span class="title">contents</span>.</div><div class="line">        <span class="title">list</span>    : <span class="title">list</span> <span class="title">loaded</span> <span class="title">sql</span> <span class="title">files</span>.</div><div class="line">                <span class="title">ex1</span>) <span class="title">list</span>&lt;<span class="title">Enter</span>&gt; : <span class="title">Show</span> <span class="title">all</span> <span class="title">loaded</span> <span class="title">sql</span> <span class="title">file</span>(<span class="title">s</span>).</div><div class="line">                <span class="title">ex2</span>) <span class="title">list</span> <span class="title">keyword</span>&lt;<span class="title">Enter</span>&gt; : <span class="title">Show</span> <span class="title">loaded</span> <span class="title">sql</span> <span class="title">file</span>(<span class="title">s</span>) <span class="title">filter</span> <span class="title">by</span> <span class="title">keyword</span>.</div><div class="line">        <span class="title">history</span> : <span class="title">list</span> <span class="title">command</span> <span class="title">history</span>.</div><div class="line">                <span class="title">ex1</span>) <span class="title">history</span>&lt;<span class="title">Enter</span>&gt; : <span class="title">Show</span> <span class="title">all</span> <span class="title">command</span> <span class="title">history</span>.</div><div class="line">                <span class="title">ex2</span>) <span class="title">history</span> <span class="title">keyword</span>&lt;<span class="title">Enter</span>&gt; : <span class="title">Show</span> <span class="title">command</span> <span class="title">history</span> <span class="title">filter</span> <span class="title">by</span> <span class="title">keyword</span>.</div><div class="line">        <span class="title">driver</span>  : <span class="title">list</span> <span class="title">loaded</span> <span class="title">drivers</span>.</div><div class="line">        <span class="title">reload</span>  : <span class="title">reload</span> <span class="title">sql</span> <span class="title">files</span>.</div><div class="line">        <span class="title">cls</span>     : <span class="title">clear</span> <span class="title">screen</span>.</div><div class="line">        <span class="title">help</span>    : <span class="title">show</span> <span class="title">this</span> <span class="title">message</span>.</div><div class="line">        <span class="title">exit</span>    : <span class="title">exit</span> <span class="title">SQL</span> <span class="title">REPL</span>. `<span class="title">CTRL</span>+<span class="title">C</span>` <span class="title">is</span> <span class="title">an</span> <span class="title">alias</span>.</div><div class="line"></div><div class="line"><span class="title">uroborosql</span> &gt;</div></pre></td></tr></table></figure></p>
<p>ヘルプが表示され、使用できるコマンドの一覧が表示されます。</p>
<p>REPLを立ち上げた状態では接続したDB（H2DB メモリDB）には何もない状態なので、まずはテーブルを作成します。<br>サンプルアプリケーションで利用できるSQLファイルを確認しましょう。</p>
<p><code>list[Enter]</code>と入力します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; list[Enter]</div><div class="line"><span class="function">LIST:</span></div><div class="line"><span class="title">ddl</span>/<span class="title">create_tables</span></div><div class="line"><span class="title">employee</span>/<span class="title">select_employee</span></div><div class="line"><span class="title">employee</span>/<span class="title">insert_employee</span></div><div class="line"><span class="title">department</span>/<span class="title">insert_department</span></div><div class="line"><span class="title">setup</span>/<span class="title">insert_data</span></div><div class="line"><span class="title">department</span>/<span class="title">select_department</span></div><div class="line"><span class="title">relation</span>/<span class="title">insert_dept_emp</span></div><div class="line"><span class="title">uroborosql</span> &gt;</div></pre></td></tr></table></figure></p>
<p>ロード済みのSQLファイルのSQL名がわかります。<br>テーブルを作成するために<code>ddl/create_tables</code>を実行します。<br><code>ddl/create_tables</code>はDDLなので実行するためには<code>update</code>コマンドを使用します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&gt; update ddl/create_tables[Enter]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">-- employee</div><div class="line">drop table <span class="keyword">if</span> exists employee cascade;</div><div class="line">create table employee (</div><div class="line">  emp_no NUMBER(<span class="number">11</span>) <span class="keyword">not</span> null</div><div class="line">  , first_name VARCHAR(<span class="number">20</span>) <span class="keyword">not</span> null</div><div class="line">  , last_name VARCHAR(<span class="number">20</span>) <span class="keyword">not</span> null</div><div class="line">  , birth_date <span class="built_in">DATE</span> <span class="keyword">not</span> null</div><div class="line">  , gender CHAR(<span class="number">1</span>) <span class="keyword">not</span> null</div><div class="line">  , constraint employee_PKC primary key (emp_no)</div><div class="line">) ;</div><div class="line">-- dept_emp</div><div class="line">drop table <span class="keyword">if</span> exists dept_emp cascade;</div><div class="line">create table dept_emp (</div><div class="line">  emp_no NUMBER(<span class="number">11</span>) <span class="keyword">not</span> null</div><div class="line">  , dept_no NUMBER(<span class="number">4</span>) <span class="keyword">not</span> null</div><div class="line">  , constraint dept_emp_PKC primary key (emp_no,dept_no)</div><div class="line">) ;</div><div class="line">-- department</div><div class="line">drop table <span class="keyword">if</span> exists department cascade;</div><div class="line">create table department (</div><div class="line">  dept_no NUMBER(<span class="number">4</span>) <span class="keyword">not</span> null</div><div class="line">  , dept_name VARCHAR(<span class="number">100</span>) <span class="keyword">not</span> null</div><div class="line">  , constraint department_PKC primary key (dept_no)</div><div class="line">) ;</div><div class="line">comment on table employee is 'employee';</div><div class="line">comment on column employee.emp_no is 'emp_no';</div><div class="line">comment on column employee.first_name is 'first_name';</div><div class="line">comment on column employee.last_name is 'last_name';</div><div class="line">comment on column employee.birth_date is 'birth_date';</div><div class="line">comment on column employee.gender is 'gender     ''F''emale/''M''ale/''O''ther';</div><div class="line">comment on table dept_emp is 'dept_emp';</div><div class="line">comment on column dept_emp.emp_no is 'emp_no';</div><div class="line">comment on column dept_emp.dept_no is 'dept_no';</div><div class="line">comment on table department is 'department';</div><div class="line">comment on column department.dept_no is 'dept_no';</div><div class="line">comment on column department.dept_name is 'dept_name'</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution <span class="built_in">time</span> [ddl/create_tables] : [<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>.<span class="number">008</span>]</div><div class="line">update sql[ddl/create_tables] end. row count=<span class="number">0</span></div><div class="line">uroborosql &gt;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p><code>ddl/create_tables</code>が実行され、DBにテーブルが作成されました。<br>続いて初期データを投入しましょう。</p>
<p><code>setup/insert_data</code>を実行します。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&gt; update setup/insert_data[Enter]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">insert into department (dept_no, dept_name) values (<span class="number">1001</span>, 'sales');</div><div class="line">insert into department (dept_no, dept_name) values (<span class="number">1002</span>, 'export');</div><div class="line">insert into department (dept_no, dept_name) values (<span class="number">1003</span>, 'accounting');</div><div class="line">insert into department (dept_no, dept_name) values (<span class="number">1004</span>, 'personnel');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (<span class="number">0001</span>, 'Bob', 'Smith', '<span class="number">1970</span>-<span class="number">01</span>-<span class="number">02</span>', 'M');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (<span class="number">0002</span>, 'Susan', 'Davis', '<span class="number">1969</span>-<span class="number">02</span>-<span class="number">10</span>', 'F');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (<span class="number">0003</span>, 'John', 'Wilson', '<span class="number">1982</span>-<span class="number">05</span>-<span class="number">08</span>', 'M');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (<span class="number">0004</span>, 'Sharon', 'Johnson', '<span class="number">1990</span>-<span class="number">01</span>-<span class="number">20</span>', 'F');</div><div class="line">insert into employee (emp_no, first_name, last_name, birth_date, gender) values (<span class="number">0005</span>, 'Stephen', 'Taylor', '<span class="number">2003</span>-<span class="number">12</span>-<span class="number">31</span>', 'M');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (<span class="number">0001</span>, '<span class="number">1001</span>');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (<span class="number">0002</span>, '<span class="number">1001</span>');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (<span class="number">0003</span>, '<span class="number">1002</span>');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (<span class="number">0004</span>, '<span class="number">1003</span>');</div><div class="line">insert into dept_emp (emp_no, dept_no) values (<span class="number">0005</span>, '<span class="number">1004</span>')</div><div class="line">]</div><div class="line">[DEBUG] Execute update SQL.</div><div class="line">[DEBUG] SQL execution <span class="built_in">time</span> [setup/insert_data] : [<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>.<span class="number">003</span>]</div><div class="line">update sql[setup/insert_data] end. row count=<span class="number">1</span></div><div class="line">uroborosql &gt;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>これで書くテーブルに初期データが挿入されました。<br>では、挿入したデータを検索してみましょう。</p>
<p>検索を行う場合は<code>query</code>コマンドを使用します。<br><code>query</code>の後に実行するSQLを指定します。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&gt; query department/select_department[Enter]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_no)], Result：[false], Parameter：[dept_no:[null]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_name)], Result：[false], Parameter：[dept_name:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* department/select_department */</div><div class="line">        DEPT.DEPT_NO    AS      DEPT_NO</div><div class="line">,       DEPT.DEPT_NAME  AS      DEPT_NAME</div><div class="line">FROM</div><div class="line">        DEPARTMENT      DEPT</div><div class="line">WHERE</div><div class="line">        1                               =       1</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[INFO ]</div><div class="line">+-------+----------+</div><div class="line">|DEPT_NO|DEPT_NAME |</div><div class="line">+-------+----------+</div><div class="line">|   1001|sales     |</div><div class="line">|   1002|export    |</div><div class="line">|   1003|accounting|</div><div class="line">|   1004|personnel |</div><div class="line">+-------+----------+</div><div class="line">[DEBUG] SQL execution time [department/select_department] : [00:00:00.009]</div><div class="line">query sql[department/select_department] end.</div><div class="line">uroborosql &gt;</div></pre></td></tr></table></figure></p>
<p>ここではバインドパラメータを指定しなかったため、絞込み条件のないSQLが実行され検索結果として4件のデータが取得できました。</p>
<p>REPLでは上の結果のように、</p>
<ul>
<li>実行するSQL</li>
<li>バインドパラメータ</li>
<li>SQL文の中の評価式とその評価結果</li>
<li>検索結果</li>
<li>実行時間</li>
</ul>
<p>が表示されるので、どういう風にSQLが実行されたのかが良く分かるようになっています。</p>
<p>次にバインドパラメータを指定して検索してみましょう。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; query department/select_department dept_no=1001</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_no)], Result：[true], Parameter：[dept_no:[1001]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_name)], Result：[false], Parameter：[dept_name:[null]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* department/select_department */</div><div class="line">        DEPT.DEPT_NO    AS      DEPT_NO</div><div class="line">,       DEPT.DEPT_NAME  AS      DEPT_NAME</div><div class="line">FROM</div><div class="line">        DEPARTMENT      DEPT</div><div class="line">WHERE</div><div class="line">        1                               =       1</div><div class="line">AND     DEPT.DEPT_NO    =       ?/*dept_no*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[dept_no], Value[1001], Class[Integer]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[INFO ]</div><div class="line">+-------+---------+</div><div class="line">|DEPT_NO|DEPT_NAME|</div><div class="line">+-------+---------+</div><div class="line">|   1001|sales    |</div><div class="line">+-------+---------+</div><div class="line">[DEBUG] SQL execution time [department/select_department] : [00:00:00.001]</div><div class="line">query sql[department/select_department] end.</div><div class="line">uroborosql &gt;</div></pre></td></tr></table></figure></p>
<p><code>dept_no</code>に1001を指定して検索しています。<br>この時、SQL文の評価式である/*IF SF.isNotEmpty(dept_no)*/が<code>true</code>となりSQLのWHERE句にDEPT_NOの条件が追加されバインドパラメータがバインドされます。<br>その結果、検索結果は1件になっています。</p>
<p>このようにSQL名の後ろに<code>バインドパラメータ名</code>=<code>値</code>という形でバインドパラメータを記述することでバインドパラメータを指定してSQLを実行することができます。</p>
<p>バインドパラメータが複数ある場合は<code>バインドパラメータ名1</code>=<code>値1</code> <code>バインドパラメータ名2</code>=<code>値2</code> … という風に各パラメータの間を空白で区切って指定してください。</p>
<ul>
<li>バインドパラメータを複数指定する例<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; query department/select_department dept_no=1001 dept_name=sales</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_no)], Result：[true], Parameter：[dept_no:[1001]]</div><div class="line">[DEBUG] Evaluation Expression：[SF.isNotEmpty(dept_name)], Result：[true], Parameter：[dept_name:[&#123;s,a,l,e,s&#125;,0]]</div><div class="line">[DEBUG] Executed SQL[</div><div class="line">SELECT /* department/select_department */</div><div class="line">        DEPT.DEPT_NO    AS      DEPT_NO</div><div class="line">,       DEPT.DEPT_NAME  AS      DEPT_NAME</div><div class="line">FROM</div><div class="line">        DEPARTMENT      DEPT</div><div class="line">WHERE</div><div class="line">        1                               =       1</div><div class="line">AND     DEPT.DEPT_NO    =       ?/*dept_no*/</div><div class="line">AND     DEPT.DEPT_NAME  =       ?/*dept_name*/</div><div class="line"></div><div class="line">]</div><div class="line">[DEBUG] Set the parameter.[INDEX[1], Parameter name[dept_no], Value[1001], Class[Integer]]</div><div class="line">[DEBUG] Set the parameter.[INDEX[2], Parameter name[dept_name], Value[sales], Class[String]]</div><div class="line">[DEBUG] Execute search SQL.</div><div class="line">[INFO ]</div><div class="line">+-------+---------+</div><div class="line">|DEPT_NO|DEPT_NAME|</div><div class="line">+-------+---------+</div><div class="line">|   1001|sales    |</div><div class="line">+-------+---------+</div><div class="line">[DEBUG] SQL execution time [department/select_department] : [00:00:00.001]</div><div class="line">query sql[department/select_department] end.</div><div class="line">uroborosql &gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>REPLではコード補完を利用することができます。<br>コード補完を使用することで選択できる情報が適宜補完され、ストレスなくREPLの操作を行うことができます。</p>
<p>例えば、以下のコマンドを実行する際、<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; query department/select_department dept_no=<span class="number">1001</span> dept_name=sales</div></pre></td></tr></table></figure></p>
<p>Tabキーを押下することで、選択可能な候補が表示され、選択肢が特定できる場合はコードが補完されます。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">uroborosql &gt; q</div><div class="line">↓ [Tab]を入力</div><div class="line">uroborosql &gt; query    // 一意に特定できる場合は補完される</div><div class="line">↓　[Space]de[Tab]を入力</div><div class="line">department/insert_department  department/select_department    // 選択可能なSQL名候補の表示</div><div class="line">uroborosql &gt; query department/    // 特定できるところまでが補完される</div><div class="line">↓　s[Tab]を入力</div><div class="line">uroborosql &gt; query department/select_department　　　// 一意に特定できたため、SQL名がコード補完される</div><div class="line">↓　[Space][Tab]を入力</div><div class="line">dept_no     dept_name　// 選択可能なバインドパラメータ候補の表示</div><div class="line">↓　dept_no=<span class="number">1001</span>を入力</div><div class="line">uroborosql &gt; query department/select_department dept_no=<span class="number">1001</span></div><div class="line">↓　[Space][Tab]を入力</div><div class="line">uroborosql &gt; query department/select_department dept_no=<span class="number">1001</span> dept_name  　　// すでに選択されたバインドパラメータは選択候補にならず、dept_nameが特定できるため補完される</div><div class="line">↓　=salesを入力</div><div class="line">uroborosql &gt; query department/select_department dept_no=<span class="number">1001</span> dept_name=sales</div></pre></td></tr></table></figure>
<p>REPLを終了する場合はコマンド<code>quit</code>,もしくは<code>exit</code>を入力してください。<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; quit[Enter]</div><div class="line">SQL REPL end.</div></pre></td></tr></table></figure></p>
<p>終了メッセージが表示されてREPLが終了します。</p>
<p>さて、ここまでREPLの操作を説明してきましたが、DB接続情報やSQLファイルの場所はどこで指定していたのでしょうか。<br>実は<code>jp.co.future.uroborosql.client.SqlREPL</code>を実行する際、引数としてプロパティファイルを指定します。このプロパティファイルにDB接続情報やSQLファイルの場所などREPLを実行するのに必要な情報が記載されています。</p>
<p>pom.xmlのREPL実行部分<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>exec-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>repl<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>java<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">workingDirectory</span>&gt;</span>$&#123;basedir&#125;<span class="tag">&lt;/<span class="name">workingDirectory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>jp.co.future.uroborosql.client.SqlREPL<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">arguments</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">argument</span>&gt;</span>REPL/repl.properties<span class="tag">&lt;/<span class="name">argument</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">arguments</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">phase</span>&gt;</span>process-classes<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>初期設定ではプロパティファイルの場所は<code>REPL/repl.properties</code>になっています。<br>REPL/repl.properties<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">db.url=jdbc:h2:file:./target/db/repldb;</div><div class="line">db.user=sa</div><div class="line">db.password=</div><div class="line"></div><div class="line">sql.additionalClassPath=$&#123;user.home&#125;/.m2/repository/com/h2database/h2/1.4.192/h2-1.4.192.jar</div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:left">プロパティ名</th>
<th style="text-align:left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">db.url</td>
<td style="text-align:left">DB接続URL</td>
</tr>
<tr>
<td style="text-align:left">db.userDB接続ユーザ</td>
</tr>
<tr>
<td style="text-align:left">db.password</td>
<td style="text-align:left">DB接続パスワード</td>
</tr>
<tr>
<td style="text-align:left">sql.additionalClassPath</td>
<td style="text-align:left">REPL起動時に起動時クラスパス以外でクラスパスに追加する場所。<code>;</code>で区切ることで複数指定可。SQLファイルのルート（sqlフォルダの親フォルダ）をクラスパスに追加することで、自動的にSQLファイルがロードされます。合わせて接続するDBのJDBCドライバを含むJarを指定することで動的にJDBCドライバを読み込みます。</td>
</tr>
</tbody>
</table>
<p>このプロパティファイルを変更することでいろいろなDBに接続することができるようになります。</p>
<p>これまで見てきたようにREPLを利用することで簡単にSQL実行や動作確認ができるので、SQL開発には欠かせないツールになります。<br>色々なSQLを記述してREPLで試してみてください。</p>
<p>これで <em>Getting Started</em> は終了です。</p>
<p>uroboroSQLで使用するSQLの文法や基本的な操作については<a href="../basics/">基本操作</a>を参照してください。</p>
<div style="font-size:130%; font-weight:bold;"><br>  <a href="../why_uroborosql" style="float:left">&#60;&#60; Why uroboroSQL?</a><a href="../basics" style="float:right">基本操作 &#62;&#62;</a><br></div>


<!-- Tags -->



<div class="tags">
    
</div>



<!-- Comments -->
<div>
    


</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
  <div class="inner">
      <div>
        <h2>Share</h2>
        <ul class="sns-area">
          <li>
            <a href="https://twitter.com/share" class="twitter-share-button" data-url="https://future-architect.github.io/uroborosql-doc/">Tweet</a>
            <script>
            ! function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0],
                p = /^http:/.test(d.location) ? 'http' : 'https';
              if (!d.getElementById(id)) { js = d.createElement(s);
                js.id = id;
                js.src = p + '://platform.twitter.com/widgets.js';
                fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');

            </script>
          </li>
          <li>
            <iframe src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Ffuture-architect.github.io%2Furoborosql-doc%2F&width=130&layout=button_count&action=like&size=small&show_faces=true&share=true&height=46&appId=316260158574612" width="130" height="46" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>
          </li>
          <li>
            <a href="http://b.hatena.ne.jp/entry/s/future-architect.github.io/uroborosql-doc/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-counter" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
            <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
          </li>
          <li>
            <div class="g-plusone" data-size="medium" data-href="https://future-architect.github.io/uroborosql-doc/"></div>
          </li>
        </ul>
      </div>
      <div>
          <h2>Follow</h2>
          <ul class="icons">
              
                  <li><a href="https://twitter.com/future_techblog" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
              
              
                  <li><a href="https://www.facebook.com/future.saiyo" class="icon style2 fa-facebook" target="_blank" ><span class="label">Facebook</span></a></li>
              
              
                  <li><a href="https://github.com/future-architect" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
              
              
                  <li><a href="http://qiita.com/organizations/future" class="icon style2 fa-pencil" target="_blank" ><span class="label">Qiita</span></a></li>
              
              
                 <li><a href="https://future-architect.github.io/" class="icon style2 fa-pencil-square-o" target="_blank" ><span class="label">Tech Blog</span></a></li>
              
          </ul>
      </div>
      <br>
      <ul class="copyright">
          <li>&copy; 2018 Future Architect. All rights reserved</li>
          <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
      </ul>
  </div>
</footer>
    </div>

    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="/uroborosql-doc/js/jquery.min.js"></script>

<!-- skel -->
<script src="/uroborosql-doc/js/skel.min.js"></script>

<!-- Custom Code -->
<script src="/uroborosql-doc/js/util.js"></script>

<!--[if lte IE 8]>
<script src="/uroborosql-doc/js/ie/respond.min.js"></script>
<![endif]-->

<!-- Custom Code -->
<script src="/uroborosql-doc/js/main.js"></script>

<!-- Gallery -->
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->


</body>

</html>