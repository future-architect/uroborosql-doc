import{_ as n,C as l,o as t,c as p,j as e,a as r,E as c,a2 as o}from"./chunks/framework.DuVu33VI.js";const g=JSON.parse('{"title":"SQLファイルの解決ルール","description":"","frontmatter":{"head":[["meta",{"name":"og:title","content":"高度な操作"}],["meta",{"name":"og:url","content":"/uroborosql-doc/advanced/"}]]},"headers":[],"relativePath":"advanced/index.md","filePath":"advanced/index.md"}'),i={name:"advanced/index.md"};function d(m,s,b,u,y,q){const a=l("CopyOrDownloadAsMarkdownButtons");return t(),p("div",null,[s[0]||(s[0]=e("div",{style:{display:"none"},hidden:"true","aria-hidden":"true"},"Are you an LLM? You can read better optimized documentation at /uroborosql-doc/advanced.md for this page in Markdown format",-1)),s[1]||(s[1]=e("h1",{id:"sqlファイルの解決ルール",tabindex:"-1"},[r("SQLファイルの解決ルール "),e("a",{class:"header-anchor",href:"#sqlファイルの解決ルール","aria-label":'Permalink to "SQLファイルの解決ルール"'},"​")],-1)),c(a),s[2]||(s[2]=o(`<h2 id="複数フォルダの指定" tabindex="-1">複数フォルダの指定 <a class="header-anchor" href="#複数フォルダの指定" aria-label="Permalink to &quot;複数フォルダの指定&quot;">​</a></h2><p>sqlフォルダはクラスパスから参照することが出来れば複数指定することが出来ます。</p><ul><li><code>src/test/resources</code>, <code>src/main/resources</code> の順にクラスパスに指定されている場合</li></ul><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src</span></span>
<span class="line"><span>    ├─main</span></span>
<span class="line"><span>    │   └─resources</span></span>
<span class="line"><span>    │       └─sql</span></span>
<span class="line"><span>    │           ├─department</span></span>
<span class="line"><span>    │           │    ├─insert_department.sql</span></span>
<span class="line"><span>    │           │    └─select_department.sql</span></span>
<span class="line"><span>    │           └─employee</span></span>
<span class="line"><span>    │                ├─insert_employee.sql</span></span>
<span class="line"><span>    │                └─select_employee.sql</span></span>
<span class="line"><span>    └─test</span></span>
<span class="line"><span>        └─resources</span></span>
<span class="line"><span>            └─sql</span></span>
<span class="line"><span>                ├─department</span></span>
<span class="line"><span>                │    ├─update_department.sql</span></span>
<span class="line"><span>                │    └─delete_department.sql</span></span>
<span class="line"><span>                └─employee</span></span>
<span class="line"><span>                     ├─update_employee.sql</span></span>
<span class="line"><span>                     └─select_employee.sql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>SQLファイルのパスが重複している場合、クラスパス上で先にあるフォルダのSQLファイルが使用されます。</p></div><p>上記のフォルダ構成の場合、<code>src/main/resources/sql/employee/select_employee.sql</code> と <code>src/test/resources/sql/employee/select_employee.sql</code> がともに <code>employee/select_employee</code> として解決されますが、クラスパスとして<code>src/test/resources</code>が先に指定されているため、<code>src/test/resources/sql/employee/select_employee.sql</code>が使用されます。</p><h2 id="jarファイルの指定" tabindex="-1">jarファイルの指定 <a class="header-anchor" href="#jarファイルの指定" aria-label="Permalink to &quot;jarファイルの指定&quot;">​</a></h2><p>SQLファイルはjarの中にリソースとして含めることもできます。<br> その場合、リソースのルート直下のsqlフォルダをルートフォルダとした相対パスでSQLファイルを指定することができます。 SQLファイルのルートフォルダ（初期値：sql)は変更することができます。<br> 変更方法の詳細は <a href="./../configuration/sql-resource-manager.html#sqlファイルルートフォルダの設定">SQLファイルルートフォルダの設定</a> を参照してください。</p><h2 id="db種類毎のファイルパス切り替え" tabindex="-1">DB種類毎のファイルパス切り替え <a class="header-anchor" href="#db種類毎のファイルパス切り替え" aria-label="Permalink to &quot;DB種類毎のファイルパス切り替え&quot;">​</a></h2><p><a href="./../configuration/dialect.html#dialect">Dialect</a>を利用して、１つのSQL名に対してDB種類毎にファイルパスを切り替えることが出来ます。<br> この機能により、接続先のDB種類が複数ある場合に発生するSQL構文の差異を吸収することができます。</p><p>以下のようなファイル構成を例として説明します。</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sql</span></span>
<span class="line"><span>  ├─employee</span></span>
<span class="line"><span>  │    └─select_employee.sql  -- Oracle, postgresql以外のDB用SQL</span></span>
<span class="line"><span>  ├─oracle</span></span>
<span class="line"><span>  │   └─employee</span></span>
<span class="line"><span>  │        └─select_employee.sql  -- oracle DB用SQL</span></span>
<span class="line"><span>  └─postgresql</span></span>
<span class="line"><span>      └─employee</span></span>
<span class="line"><span>           └─select_employee.sql  -- postgresql DB用SQL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>SQL名として<code>employee/select_employee</code>を指定した場合、<br> Oracle DBの場合は<code>sql/oracle/employee/select_employee.sql</code>が読み込まれます。<br> 同様にPostgresql DBの場合は<code>sql/postgresql/employee/select_employee.sql</code>が読み込まれます。<br> DBに対するDialect用のフォルダがない場合は通常通り<code>sql/employee/select_employee.sql</code>が読み込まれます。</p><p>DB毎のフォルダ名</p><table tabindex="0"><thead><tr><th style="text-align:left;">DB名</th><th style="text-align:left;">フォルダ名</th></tr></thead><tbody><tr><td style="text-align:left;">H2 DB</td><td style="text-align:left;">h2</td></tr><tr><td style="text-align:left;">Microsoft SQL Server</td><td style="text-align:left;">mssql</td></tr><tr><td style="text-align:left;">MySQL</td><td style="text-align:left;">mysql</td></tr><tr><td style="text-align:left;">Oracle</td><td style="text-align:left;">oracle</td></tr><tr><td style="text-align:left;">Postgresql</td><td style="text-align:left;">postgresql</td></tr><tr><td style="text-align:left;">その他</td><td style="text-align:left;">default</td></tr></tbody></table>`,15))])}const _=n(i,[["render",d]]);export{g as __pageData,_ as default};
