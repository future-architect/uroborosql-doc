import{C as t,o as l,c as d,j as s,a,E as r,a2 as o,k as p,g as u}from"./chunks/framework.DuVu33VI.js";const c="/uroborosql-doc/assets/cobertura.CekyfXBT.png",h="/uroborosql-doc/assets/html_coverage_report_summary.Tyh867tK.png",m="/uroborosql-doc/assets/html_coverage_report.RQGV3Ebh.png",g=["href"],E=JSON.parse('{"title":"SQLカバレッジ","description":"","frontmatter":{"head":[["meta",{"name":"og:title","content":"SQLカバレッジ"}],["meta",{"name":"og:url","content":"/uroborosql-doc/advanced/sql-coverage.html"}]]},"headers":[],"relativePath":"advanced/sql-coverage.md","filePath":"advanced/sql-coverage.md"}'),b={name:"advanced/sql-coverage.md"},q=Object.assign(b,{setup(v){return(k,e)=>{const i=t("CopyOrDownloadAsMarkdownButtons"),n=t("Badge");return l(),d("div",null,[e[7]||(e[7]=s("div",{style:{display:"none"},hidden:"true","aria-hidden":"true"},"Are you an LLM? You can read better optimized documentation at /uroborosql-doc/advanced/sql-coverage.md for this page in Markdown format",-1)),e[8]||(e[8]=s("h1",{id:"sqlカバレッジ",tabindex:"-1"},[a("SQLカバレッジ "),s("a",{class:"header-anchor",href:"#sqlカバレッジ","aria-label":'Permalink to "SQLカバレッジ"'},"​")],-1)),r(i),e[9]||(e[9]=o('<p>これまでアプリケーション上の条件分岐はカバレッジツールを利用して網羅率を確認することができました。<br> しかし、SQL文の条件分岐は実際にその分岐が通っているかどうかを確認する手段がなく、リリース後に初めて通った条件で不具合を発生させることがありました。<br> この問題を解決するために<strong>uroboroSQL</strong>では、SQL文の条件分岐を集計してカバレッジレポートを行う機能を提供します。</p><p>SQLカバレッジは<strong>uroboroSQL</strong>を利用するアプリケーションの起動時オプションに</p><div class="language-md vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-Duroborosql.sql.coverage=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>を追加することで有効になります。<br> SQLカバレッジを有効にするとアプリケーションが実行している間に実行されるSQLについて、カバレッジ情報が収集されます。<br> カバレッジ情報の収集結果は標準では<code>target/coverage/sql-cover.xml</code>に出力されます。<br> このファイルの場所や名前を変更したい場合は、起動時オプションに</p><div class="language-md vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-Duroborosql.sql.coverage.file=[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">出力ファイルパス</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>を指定してください。</p><p>出力された<code>sql-cover.xml</code>をJenkinsのCobertura pluginなどのXMLレポートとして読み込むとSQLファイルのカバレッジレポートが参照できるようになります。</p><p><img src="'+c+'" alt="カバレッジレポート例" title="Jenkins Cobertura Report" width="600px"></p>',8)),s("p",null,[e[0]||(e[0]=a("また",-1)),r(n,{text:"0.2.0+",vertical:"middle"}),e[1]||(e[1]=a("より、",-1)),e[2]||(e[2]=s("strong",null,"uroboroSQL",-1)),e[3]||(e[3]=a("のみでHTMLレポートを出力することができるようになりました。",-1)),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=a(" 起動時オプションに",-1))]),e[10]||(e[10]=o('<div class="language-md vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-Duroborosql.sql.coverage=jp.co.future.uroborosql.coverage.reports.html.HtmlReportCoverageHandler</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>を指定することで本機能を利用することができます。</p><p>カバレッジ情報はデフォルトでは<code>target/coverage/sql</code>フォルダ配下に出力されます。<br> 出力先フォルダを変更した場合は、起動時オプションに</p><div class="language-md vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-Duroborosql.sql.coverage.dir=[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">出力フォルダパス</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>を指定してください。</p><p>出力されたレポートのサンプルは下記を参照してください。</p><h2 id="サマリーページ" tabindex="-1">サマリーページ <a class="header-anchor" href="#サマリーページ" aria-label="Permalink to &quot;サマリーページ&quot;">​</a></h2><p><img src="'+h+'" alt="HTML Coverage Report Summary" width="800px"></p><h2 id="詳細ページ" tabindex="-1">詳細ページ <a class="header-anchor" href="#詳細ページ" aria-label="Permalink to &quot;詳細ページ&quot;">​</a></h2><p><img src="'+m+'" alt="HTML Coverage Report" width="800px"></p>',10)),s("p",null,[s("a",{href:p(u)("/sample/testReport/index.html"),target:"_blank",style:{"font-size":"20px"}},[...e[6]||(e[6]=[s("i",{class:"fa fa-external-link","aria-hidden":"true"},null,-1),a("出力サンプル",-1)])],8,g)])])}}});export{E as __pageData,q as default};
