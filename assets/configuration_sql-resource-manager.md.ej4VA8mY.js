import{_ as t,C as l,o as n,c as i,j as s,a as r,E as p,a2 as o}from"./chunks/framework.DuVu33VI.js";const y=JSON.parse('{"title":"SqlResourceManager","description":"","frontmatter":{"head":[["meta",{"name":"og:title","content":"SqlResourceManager"}],["meta",{"name":"og:url","content":"/uroborosql-doc/configuration/sql-resource-manager.html"}]]},"headers":[],"relativePath":"configuration/sql-resource-manager.md","filePath":"configuration/sql-resource-manager.md"}'),d={name:"configuration/sql-resource-manager.md"};function c(h,e,g,u,m,b){const a=l("CopyOrDownloadAsMarkdownButtons");return n(),i("div",null,[e[0]||(e[0]=s("div",{style:{display:"none"},hidden:"true","aria-hidden":"true"},"Are you an LLM? You can read better optimized documentation at /uroborosql-doc/configuration/sql-resource-manager.md for this page in Markdown format",-1)),e[1]||(e[1]=s("h1",{id:"sqlresourcemanager",tabindex:"-1"},[r("SqlResourceManager "),s("a",{class:"header-anchor",href:"#sqlresourcemanager","aria-label":'Permalink to "SqlResourceManager"'},"​")],-1)),p(a),e[2]||(e[2]=o(`<p><code>SqlResourceManager</code>はSQLファイルを管理するクラスです。</p><div class="tip custom-block"><p class="custom-block-title">クラス名の変更</p><p>uroborosql v1.x で SqlManager から SqlResourceManagerにクラス名が変更されました。</p></div><p>SqlResourceManagerの具象クラスとしてSqlResourceManagerImplクラスが提供されています。</p><table tabindex="0"><thead><tr><th style="text-align:left;">クラス</th><th style="text-align:left;">説明</th></tr></thead><tbody><tr><td style="text-align:left;">SqlResourceManagerImpl</td><td style="text-align:left;"><code>java.nio</code>を利用したファイルアクセスを行う<code>SqlResourceManager</code>クラス</td></tr></tbody></table><p>SqlResourceManagerImplクラスの特徴</p><ul><li>SQLファイルルートフォルダ設定</li><li>SQLファイルエンコーディング設定</li><li>起動時のファイルパスキャッシュ</li><li>遅延ファイルキャッシュ</li><li>jarファイル中のSQL参照</li><li>zipファイル中のSQL参照</li><li>カスタムファイルアクセス対応（<code>java.nio.file</code>パッケージを使用）</li><li>DB種類毎のファイルパス切り替え</li></ul><h2 id="sqlファイルルートフォルダの設定" tabindex="-1">SQLファイルルートフォルダの設定 <a class="header-anchor" href="#sqlファイルルートフォルダの設定" aria-label="Permalink to &quot;SQLファイルルートフォルダの設定&quot;">​</a></h2><p><strong>uroboroSQL</strong>は初期設定ではクラスパス上にある<code>sql</code>フォルダ配下のSQLを読み込みます。<br> このSQLファイルルートフォルダは変更することができます。</p><p>SQLファイルルートフォルダの設定 (custom_sqlフォルダを指定)</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// SqlResourceManagerImplの場合</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SqlConfig config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UroboroSQL.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(...)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // SQLファイルのルートフォルダの設定(custom_sqlフォルダをルートフォルダにする場合)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSqlResourceManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SqlResourceManagerImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;custom_sql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="db種類毎のファイルパス切り替え" tabindex="-1">DB種類毎のファイルパス切り替え <a class="header-anchor" href="#db種類毎のファイルパス切り替え" aria-label="Permalink to &quot;DB種類毎のファイルパス切り替え&quot;">​</a></h2><p>後述する<a href="./dialect.html#dialect">Dialect</a>を利用して、１つのSQL名に対してDB種類毎にファイルパスを切り替えることが出来ます。</p><p>以下のようなファイル構成を例として説明します。</p><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sql</span></span>
<span class="line"><span>  ├─employee</span></span>
<span class="line"><span>  │    └─select_employee.sql  -- Oracle, postgresql以外のDB用SQL</span></span>
<span class="line"><span>  ├─oracle</span></span>
<span class="line"><span>  │   └─employee</span></span>
<span class="line"><span>  │        └─select_employee.sql  -- oracle DB用SQL</span></span>
<span class="line"><span>  └─postgresql</span></span>
<span class="line"><span>      └─employee</span></span>
<span class="line"><span>           └─select_employee.sql  -- postgresql DB用SQL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>SQL名として<code>employee/select_employee</code>を指定した場合、<br> Oracle DBの場合は<code>sql/oracle/employee/select_employee.sql</code>が読み込まれます。<br> 同様にPostgresql DBの場合は<code>sql/postgresql/employee/select_employee.sql</code>が読み込まれます。<br> DBに対するDialect用のフォルダがない場合は通常通り<code>sql/employee/select_employee.sql</code>が読み込まれます。</p><p>DB毎のフォルダ名</p><table tabindex="0"><thead><tr><th style="text-align:left;">DB名</th><th style="text-align:left;">フォルダ名</th></tr></thead><tbody><tr><td style="text-align:left;">H2 DB</td><td style="text-align:left;">h2</td></tr><tr><td style="text-align:left;">Microsoft SQL Server</td><td style="text-align:left;">mssql</td></tr><tr><td style="text-align:left;">MySQL</td><td style="text-align:left;">mysql</td></tr><tr><td style="text-align:left;">Oracle</td><td style="text-align:left;">oracle</td></tr><tr><td style="text-align:left;">Postgresql</td><td style="text-align:left;">postgresql</td></tr><tr><td style="text-align:left;">その他</td><td style="text-align:left;">default</td></tr></tbody></table>`,17))])}const q=t(d,[["render",c]]);export{y as __pageData,q as default};
