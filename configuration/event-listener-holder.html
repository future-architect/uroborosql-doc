<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EventListenerHolder と EventSubscriber | uroboroSQL</title>
    <meta name="description" content="uroboroSQLはJava製のシンプルなSQL実行ライブラリです">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/uroborosql-doc/assets/style.kH7Mh9Tp.css" as="style">
    <link rel="preload stylesheet" href="/uroborosql-doc/vp-icons.css" as="style">
    
    <script type="module" src="/uroborosql-doc/assets/app.DUv1JyDQ.js"></script>
    <link rel="preload" href="/uroborosql-doc/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/framework.DuVu33VI.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/theme.C-YSThW9.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/katex.CBSAILhF.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/dagre-6UL2VRFP.DZN1LOgc.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/cose-bilkent-S5V4N54A.Djoiov5o.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/c4Diagram-YG6GDRKO.DaF044DF.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/flowDiagram-NV44I4VS.jXpS01CY.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/erDiagram-Q2GNP2WA.jukg0OKC.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/gitGraphDiagram-NY62KEGX.OChFyC7s.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/ganttDiagram-JELNMOA3.ppzOm-Rn.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/infoDiagram-WHAUD3N6.BLEia6ds.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/pieDiagram-ADFJNKIX.Dl-QBiIT.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/quadrantDiagram-AYHSOK5B.5Ka022-6.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/xychartDiagram-PRI3JC2R.CLtuMwFn.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/requirementDiagram-UZGBJVZJ.CGaUUdf-.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/sequenceDiagram-WL72ISMW.CtqUjqAw.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/classDiagram-2ON5EDUG.CvNsW5j6.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/classDiagram-v2-WZHVMYZB.CvNsW5j6.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/stateDiagram-FKZM4ZOC.DP3sY0zn.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/stateDiagram-v2-4FDKWEC3.FbTGMobI.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/journeyDiagram-XKPGCS4Q.CQ3tR2xM.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/timeline-definition-IT6M3QCI.DB7IxHxD.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/mindmap-definition-VGOIOE7T.4qYlaW-7.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/kanban-definition-3W4ZIXB7.DopW-3JM.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/sankeyDiagram-TZEHDZUN.CNtSu25J.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/diagram-S2PKOQOG.1Kdxv6Wh.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/diagram-QEK2KX5R.DQPFxsG1.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/blockDiagram-VD42YOAC.BQPlO19o.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/architectureDiagram-VXUJARFQ.B5ZabYUZ.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/diagram-PSM6KHXK.BIetwohM.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/uroborosql-doc/assets/configuration_event-listener-holder.md.C26urwMy.lean.js">
    <link rel="icon" href="/uroborosql-doc/icon.png">
    <meta name="og:type" content="website">
    <meta name="og:description" content="uroboroSQLDeveloper-oriented and SQL centric database access library.">
    <meta name="og:image" content="https://future-architect.github.io/uroborosql-doc/images/logo.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:title" content="EventListenerHolder">
    <meta name="og:url" content="/uroborosql-doc/configuration/event-listener-holder.html">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/uroborosql-doc/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://future-architect.github.io/uroborosql-doc/images/logo.png" alt data-v-8426fc1a><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/getting_started/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Getting Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/basics/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>基本操作</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/best_practices/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ベストプラクティス</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/configuration/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>設定</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/advanced/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>高度な操作</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/uroborosql-doc/developer_tools/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Developer Tools</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://future-architect.github.io/uroborosql-doc_v0.x/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Old Version</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/future-architect/uroborosql" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/future-architect/uroborosql" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Why uroboroSQL</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/why_uroborosql/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>uroboroSQLとは</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Getting Started</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/getting_started/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>環境設定</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/getting_started/sql-file-access.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SQLファイルを使用したDBアクセス</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/getting_started/entity-access.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>エンティティクラスを使用したDBアクセス</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/getting_started/sql-repl.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SQL-REPL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>前提知識</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/background/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>2WaySQL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/background/el.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>式言語</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>基本操作</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/basics/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事前準備</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/basics/sql-file-api.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SQLファイルインタフェース</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/basics/entity-api.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>DAOインタフェース</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/basics/transaction.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>トランザクション</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>ベストプラクティス</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/best_practices/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ベストプラクティス</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>設定</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SqlConfigの生成</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/connection-supplier.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ConnectionSupplier</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/sql-agent-provider.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SqlAgentProvider</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/execution-context-provider.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ExecutionContextProvider</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/sql-resource-manager.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SqlResourceManager</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/event-listener-holder.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>EventListenerHolder と EventSubscriber</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/configuration/dialect.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Dialect</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>高度な操作</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SQLファイルの解決ルール</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/in-transaction-exception-handling.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>PostgreSQLのトランザクション内SQLエラー対応</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/cache-metadata.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>メタデータのキャッシュ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/parameter-mapping.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>JavaオブジェクトとJDBC型のパラメータマッピング</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/update-delegate.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>更新処理の委譲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/sql-coverage.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>SQLカバレッジ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/logging.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ログ出力</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/advanced/system-properties.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>システムプロパティ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/developer_tools/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Developer Tools</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/developer_guide/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>開発者ガイド</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/license/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>License</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/uroborosql-doc/about/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>uroboroSQLについて</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _uroborosql-doc_configuration_event-listener-holder" data-v-39a288b8><div><div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /uroborosql-doc/configuration/event-listener-holder.md for this page in Markdown format</div><h1 id="eventlistenerholder-と-eventsubscriber" tabindex="-1">EventListenerHolder と EventSubscriber <a class="header-anchor" href="#eventlistenerholder-と-eventsubscriber" aria-label="Permalink to &quot;EventListenerHolder と EventSubscriber&quot;">​</a></h1><div class="markdown-copy-buttons" data-v-6b03c8fc><div class="markdown-copy-buttons-inner" data-v-6b03c8fc><div class="dropdown-container" data-v-6b03c8fc><div class="dropdown-trigger" data-v-6b03c8fc><button class="copy-page" data-v-6b03c8fc><span class="icon" data-v-6b03c8fc><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></span><span class="label" data-v-6b03c8fc>Copy page</span></button><span class="divider" data-v-6b03c8fc></span><button class="chevron-wrapper" data-v-6b03c8fc><span class="icon chevron" data-v-6b03c8fc><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-chevron-down-icon lucide-chevron-down" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg></span></button></div><!----></div><button class="download-btn" data-v-6b03c8fc><span class="icon" data-v-6b03c8fc><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-file-down-icon lucide-file-down" viewBox="0 0 24 24"><path d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"/><path d="M14 2v5a1 1 0 0 0 1 1h5m-8 10v-6m-3 3 3 3 3-3"/></svg></span></button></div></div><h2 id="概要" tabindex="-1">概要 <a class="header-anchor" href="#概要" aria-label="Permalink to &quot;概要&quot;">​</a></h2><p><strong>uroboroSQL</strong>では、SQL実行時のイベントをリスニングするための仕組みとして、<code>EventListenerHolder</code>と<code>EventSubscriber</code>を提供しています。これらを利用することで、SQL実行前後の処理をフックし、ロギングやメトリクス収集などのクロスカッティングな処理を実装できます。</p><h2 id="eventlistenerholder" tabindex="-1">EventListenerHolder <a class="header-anchor" href="#eventlistenerholder" aria-label="Permalink to &quot;EventListenerHolder&quot;">​</a></h2><p><code>EventListenerHolder</code>は、複数の<code>EventSubscriber</code>を管理するコンテナクラスです。SQL実行時のイベントを登録されたすべてのサブスクライバーに通知します。</p><h3 id="主な機能" tabindex="-1">主な機能 <a class="header-anchor" href="#主な機能" aria-label="Permalink to &quot;主な機能&quot;">​</a></h3><ul><li>イベントサブスクライバーの登録・削除、イベントサブスクライバー一覧の取得</li><li>登録されたすべてのサブスクライバーへのイベント通知</li><li>イベント処理の順序制御</li></ul><h2 id="eventsubscriber" tabindex="-1">EventSubscriber <a class="header-anchor" href="#eventsubscriber" aria-label="Permalink to &quot;EventSubscriber&quot;">​</a></h2><p><code>EventSubscriber</code>は、SQL実行時の各種イベントを受け取るためのインターフェースです。以下のようなイベントをハンドリングできます。</p><h3 id="対応イベント" tabindex="-1">対応イベント <a class="header-anchor" href="#対応イベント" aria-label="Permalink to &quot;対応イベント&quot;">​</a></h3><h4 id="sql実行関連" tabindex="-1">SQL実行関連 <a class="header-anchor" href="#sql実行関連" aria-label="Permalink to &quot;SQL実行関連&quot;">​</a></h4><table tabindex="0"><thead><tr><th>イベント</th><th>説明</th></tr></thead><tbody><tr><td><strong>AfterInitializeExecutionContext</strong></td><td>ExecutionContext初期化後</td></tr><tr><td><strong>BeforeSetParameter</strong></td><td>パラメータ設定前</td></tr><tr><td><strong>BeforeTransformSql</strong></td><td>SQL変換前</td></tr><tr><td><strong>BeforeParseSql</strong></td><td>SQLパース前</td></tr><tr><td><strong>AfterCreatePreparedStatement</strong></td><td>PreparedStatement生成後</td></tr><tr><td><strong>AfterCreateCallableStatement</strong></td><td>CallableStatement生成後</td></tr><tr><td><strong>AfterSqlQuery</strong></td><td>SQLQuery実行後</td></tr><tr><td><strong>AfterSqlUpdate</strong></td><td>SQLUpdate実行後</td></tr><tr><td><strong>AfterSqlBatch</strong></td><td>SQLBatch実行後</td></tr><tr><td><strong>AfterProcedure</strong></td><td>Procedure実行後</td></tr><tr><td><strong>AfterGetOutParameter</strong></td><td>出力パラメータ取得後</td></tr></tbody></table><ul><li>SqlAgent#query/update/batch 実行時イベントの発生順序は以下になります。</li></ul><div class="mermaid"></div><ul><li>SqlAgent#procedure 実行時イベントの発生順序は以下になります。</li></ul><div class="mermaid"></div><h4 id="entity操作関連" tabindex="-1">Entity操作関連 <a class="header-anchor" href="#entity操作関連" aria-label="Permalink to &quot;Entity操作関連&quot;">​</a></h4><table tabindex="0"><thead><tr><th>イベント</th><th>説明</th></tr></thead><tbody><tr><td><strong>BeforeEntityQuery</strong></td><td>EntityQuery実行前</td></tr><tr><td><strong>AfterEntityQuery</strong></td><td>EntityQuery実行後</td></tr><tr><td><strong>BeforeEntityInsert</strong></td><td>EntityInsert実行前</td></tr><tr><td><strong>AfterEntityInsert</strong></td><td>EntityInsert実行後</td></tr><tr><td><strong>BeforeEntityUpdate</strong></td><td>EntityUpdate実行前</td></tr><tr><td><strong>AfterEntityUpdate</strong></td><td>EntityUpdate実行後</td></tr><tr><td><strong>BeforeEntityDelete</strong></td><td>EntityDelete実行前</td></tr><tr><td><strong>AfterEntityDelete</strong></td><td>EntityDelete実行後</td></tr><tr><td><strong>BeforeEntityBatchInsert</strong></td><td>EntityBatchInsert実行前</td></tr><tr><td><strong>AfterEntityBatchInsert</strong></td><td>EntityBatchInsert実行後</td></tr><tr><td><strong>BeforeEntityBatchUpdate</strong></td><td>EntityBatchUpdate実行前</td></tr><tr><td><strong>AfterEntityBatchUpdate</strong></td><td>EntityBatchUpdate実行後</td></tr><tr><td><strong>BeforeEntityBulkInsert</strong></td><td>EntityBulkInsert実行前</td></tr><tr><td><strong>AfterEntityBulkInsert</strong></td><td>EntityBulkInsert実行後</td></tr></tbody></table><h4 id="トランザクション関連" tabindex="-1">トランザクション関連 <a class="header-anchor" href="#トランザクション関連" aria-label="Permalink to &quot;トランザクション関連&quot;">​</a></h4><table tabindex="0"><thead><tr><th>イベント</th><th>説明</th></tr></thead><tbody><tr><td><strong>AfterBeginTransaction</strong></td><td>トランザクション開始後</td></tr><tr><td><strong>BeforeEndTransaction</strong></td><td>トランザクション終了前</td></tr><tr><td><strong>BeforeCommit</strong></td><td>コミット前</td></tr><tr><td><strong>AfterCommit</strong></td><td>コミット後</td></tr><tr><td><strong>BeforeRollback</strong></td><td>ロールバック前</td></tr><tr><td><strong>AfterRollback</strong></td><td>ロールバック後</td></tr></tbody></table><h2 id="uroborosqlで提供されているサブスクライバー" tabindex="-1"><strong>uroboroSQL</strong>で提供されているサブスクライバー <a class="header-anchor" href="#uroborosqlで提供されているサブスクライバー" aria-label="Permalink to &quot;**uroboroSQL**で提供されているサブスクライバー&quot;">​</a></h2><p><strong>uroboroSQL</strong>では、以下の<code>EventSubscriber</code>実装が標準で提供されています。</p><table tabindex="0"><thead><tr><th>サブスクライバ</th><th>説明</th></tr></thead><tbody><tr><td><a href="#secretcolumneventsubscriber"><strong>SecretColumnEventSubscriber</strong></a></td><td>指定したカラムの値を自動的に暗号化/復号化します</td></tr><tr><td><a href="#wrapcontexteventsubscriber"><strong>WrapContextEventSubscriber</strong></a></td><td>ExecutionContextをラップして機能を拡張します</td></tr><tr><td><a href="#auditlogeventsubscriber"><strong>AuditLogEventSubscriber</strong></a></td><td>SQL実行の監査ログを出力します</td></tr><tr><td><a href="#debugeventsubscriber"><strong>DebugEventSubscriber</strong></a></td><td>SQL実行のデバッグログを出力します</td></tr><tr><td><a href="#dumpresulteventsubscriber"><strong>DumpResultEventSubscriber</strong></a></td><td>クエリ結果をダンプ形式で出力します</td></tr><tr><td><a href="#replcommandlogeventsubscriber"><strong>ReplCommandLogEventSubscriber</strong></a></td><td>REPL(対話型SQL実行環境)でのコマンド実行ログを出力します</td></tr></tbody></table><h3 id="secretcolumneventsubscriber" tabindex="-1">SecretColumnEventSubscriber <a class="header-anchor" href="#secretcolumneventsubscriber" aria-label="Permalink to &quot;SecretColumnEventSubscriber&quot;">​</a></h3><p>DBアクセス時に機密カラムの値を暗号化/復号化するサブスクライバーです。<br> このサブスクライバーを使用することで、DBの暗号化の仕組みを利用せずにカラム単位での値の暗号化・復号化ができます。</p><h4 id="主な機能-1" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-1" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li><a href="https://docs.oracle.com/javase/jp/11/docs/api/java.base/javax/crypto/package-summary.html" target="_blank" rel="noreferrer">Javaの暗号化の仕組み</a> を使用して、指定カラムの暗号化・復号化を行います。 <ul><li>INSERT/UPDATE実行時に指定カラムの値を暗号化</li><li>SELECT実行時に指定カラムの値を復号化</li></ul></li></ul><h4 id="パラメータ" tabindex="-1">パラメータ: <a class="header-anchor" href="#パラメータ" aria-label="Permalink to &quot;パラメータ:&quot;">​</a></h4><table tabindex="0"><thead><tr><th>パラメータ名</th><th>型</th><th>必須</th><th>デフォルト値</th><th>説明</th></tr></thead><tbody><tr><td><strong>keyStoreFilePath</strong></td><td>String</td><td>○</td><td>-</td><td>秘密鍵を格納したKeyStoreファイルのパス<br>KeyStoreはJCEKSタイプであること</td></tr><tr><td><strong>alias</strong></td><td>String</td><td>○</td><td>-</td><td>KeyStore内で秘密鍵が格納されている場所を示すエイリアス名</td></tr><tr><td><strong>storePassword</strong></td><td>String</td><td>○</td><td>-</td><td>KeyStoreにアクセスするためのストアパスワード<br>Base64エンコードした値を指定する</td></tr><tr><td><strong>cryptColumnNames</strong></td><td>List&lt;String&gt;</td><td>○</td><td>-</td><td>暗号化、復号化を行うカラム名のリスト<br>カラム名はスネークケース（大文字）で指定する<br>cryptColumnNames で指定したカラム名はcryptParamKeysにも追加される</td></tr><tr><td><strong>cryptParamKeys</strong></td><td>List&lt;String&gt;</td><td>○</td><td>-</td><td>暗号化、復号化を行うパラメータ名のリスト<br>パラメータ名はキャメルケースで指定する</td></tr><tr><td><strong>charset</strong></td><td>String</td><td></td><td>UTF-8</td><td>暗号化/復号化時に使用するキャラクタセット</td></tr><tr><td><strong>transformationType</strong></td><td>String</td><td></td><td>AES/ECB/PKCS5Padding</td><td>変換の名前（例: AES/GCM/NoPadding）。標準の変換名については、<a href="https://docs.oracle.com/javase/jp/11/docs/specs/security/standard-names.html#cipher-algorithm-names" target="_blank" rel="noreferrer">Java暗号化アーキテクチャー標準アルゴリズム名</a>のドキュメントを参照</td></tr><tr><td><strong>skip</strong></td><td>boolean</td><td></td><td>false</td><td>イベント処理をスキップするかどうか</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">機密カラムの命名</p><p>SecretColumnEventSubscriber では機密情報を格納するカラムをカラム名で特定します。<br> そのためカラム名が同一で、暗号化するカラムと暗号化しないカラムが混在している場合は対応できません。<br> 機密情報を格納するカラムの名前は一意に識別できるような命名を行ってください。</p></div><h3 id="wrapcontexteventsubscriber" tabindex="-1">WrapContextEventSubscriber <a class="header-anchor" href="#wrapcontexteventsubscriber" aria-label="Permalink to &quot;WrapContextEventSubscriber&quot;">​</a></h3><p>発行するSQL文字列の前後をラップするサブスクライバーです。</p><h4 id="主な機能-2" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-2" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li>SQL発行をフックし、発行されるSQLの前後に文字列を付与します。主に検索SQLをページングに対応するために一律limit句やoffset句を追加するような用途を想定しています。</li><li>SQL変換前にSQLの加工を行うため、バインドパラメータや置換文字列も利用できます。</li></ul><h4 id="パラメータ-1" tabindex="-1">パラメータ: <a class="header-anchor" href="#パラメータ-1" aria-label="Permalink to &quot;パラメータ:&quot;">​</a></h4><table tabindex="0"><thead><tr><th>パラメータ名</th><th>型</th><th>必須</th><th>デフォルト値</th><th>説明</th></tr></thead><tbody><tr><td><strong>wrappedSqlBeginParts</strong></td><td>String</td><td></td><td>-</td><td>SQL文の前に追加する文字列<br>例: <code>SELECT * FROM (</code></td></tr><tr><td><strong>wrappedSqlEndParts</strong></td><td>String</td><td></td><td>-</td><td>SQL文の後に追加する文字列<br>例: <code>) LIMIT /*pageSize*/100 OFFSET /*pageSize * (pageCount - 1)*/0</code></td></tr><tr><td><strong>wrapIgnorePattern</strong></td><td>String</td><td></td><td>-</td><td>Wrapを無視するSQLのパターン（正規表現）<br>このパターンにマッチするSQLはWrap処理をスキップする</td></tr></tbody></table><h3 id="auditlogeventsubscriber" tabindex="-1">AuditLogEventSubscriber <a class="header-anchor" href="#auditlogeventsubscriber" aria-label="Permalink to &quot;AuditLogEventSubscriber&quot;">​</a></h3><p>SQL実行の監査ログを記録するためのサブスクライバーです。SQL実行前後の情報を構造化されたログとして出力します。<br> AuditLogは ログ名 : <code>jp.co.future.uroborosql.event.auditlog</code> に debugレベルで出力されます。</p><h4 id="主な機能-3" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-3" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li>SQL実行時刻、実行時間の記録</li><li>実行されたSQL文とバインドパラメータの記録</li><li>実行結果(件数、エラー情報など)の記録</li></ul><h4 id="パラメータ-2" tabindex="-1">パラメータ: <a class="header-anchor" href="#パラメータ-2" aria-label="Permalink to &quot;パラメータ:&quot;">​</a></h4><table tabindex="0"><thead><tr><th>パラメータ名</th><th>型</th><th>必須</th><th>デフォルト値</th><th>説明</th></tr></thead><tbody><tr><td><strong>funcIdKey</strong></td><td>String</td><td></td><td>_funcId</td><td>バインドパラメータから機能IDを取得する際のキー名<br>ログに記録する機能IDの取得に使用</td></tr><tr><td><strong>userNameKey</strong></td><td>String</td><td></td><td>_userName</td><td>バインドパラメータからユーザ名を取得する際のキー名<br>ログに記録するユーザ名の取得に使用</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">注意事項</p><p>AuditLogEventSubscriber で件数を取得するためにはResultSetの種類が <code>ResultSet#TYPE_SCROLL_INSENSITIVE</code> または <code>ResultSet#TYPE_SCROLL_SENSITIVE</code> である必要があります。<br><code>ResultSet#TYPE_FORWARD_ONLY</code> の場合は 件数は常に -1 となります。</p></div><h3 id="debugeventsubscriber" tabindex="-1">DebugEventSubscriber <a class="header-anchor" href="#debugeventsubscriber" aria-label="Permalink to &quot;DebugEventSubscriber&quot;">​</a></h3><p>開発時のデバッグ用ログを出力するサブスクライバーです。SQL実行の詳細な情報をコンソールに出力します。<br> デバッグ用ログは ログ名 : <code>jp.co.future.uroborosql.event.debug</code> に debugレベルとtraceレベルで出力されます。</p><h4 id="主な機能-4" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-4" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li>トランザクション開始・終了の表示（debug）</li><li>バインドパラメータの詳細表示（debug）</li><li>発行したSQL名の表示（debug）</li><li>発行したSQL文の表示（trace）</li></ul><h3 id="dumpresulteventsubscriber" tabindex="-1">DumpResultEventSubscriber <a class="header-anchor" href="#dumpresulteventsubscriber" aria-label="Permalink to &quot;DumpResultEventSubscriber&quot;">​</a></h3><p>クエリ結果をダンプ形式で出力するサブスクライバーです。SELECT文の実行結果を表形式で見やすく表示します。<br> クエリ結果ダンプ結果ログは ログ名 : <code>jp.co.future.uroborosql.event.dumpresult</code> に debugレベルで出力されます。</p><h4 id="主な機能-5" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-5" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li>クエリ結果の表形式表示</li></ul><div class="warning custom-block"><p class="custom-block-title">注意事項</p><p>DumpResultEventSubscriber によるクエリ結果の取得にはResultSetの種類が <code>ResultSet#TYPE_SCROLL_INSENSITIVE</code> または <code>ResultSet#TYPE_SCROLL_SENSITIVE</code> である必要があります。<br><code>ResultSet#TYPE_FORWARD_ONLY</code> の場合もクエリ結果は出力されますが、このサブスクライバーが結果セットを先頭から最後まで読み進めるため、 処理後にはカーソルが末尾に到達し、アプリケーション側で同じ <code>ResultSet</code> を使った後続の検索・取得処理は行えなくなります（結果セットが消費されます）</p></div><h3 id="replcommandlogeventsubscriber" tabindex="-1">ReplCommandLogEventSubscriber <a class="header-anchor" href="#replcommandlogeventsubscriber" aria-label="Permalink to &quot;ReplCommandLogEventSubscriber&quot;">​</a></h3><p>REPL(対話型SQL実行環境)でのコマンド実行ログを記録するサブスクライバーです。<br> コマンド実行ログは ログ名 : <code>jp.co.future.uroborosql.event.replcommand</code> に debugレベルで出力されます。</p><h4 id="主な機能-6" tabindex="-1"><strong>主な機能:</strong> <a class="header-anchor" href="#主な機能-6" aria-label="Permalink to &quot;**主な機能:**&quot;">​</a></h4><ul><li>REPLコマンドの実行履歴記録</li></ul><h2 id="カスタムeventsubscriberの作成" tabindex="-1">カスタムEventSubscriberの作成 <a class="header-anchor" href="#カスタムeventsubscriberの作成" aria-label="Permalink to &quot;カスタムEventSubscriberの作成&quot;">​</a></h2><p><strong>uroboroSQL</strong>では、<code>EventSubscriber</code>インターフェースを実装することで、独自のイベント処理を追加できます。<br> ここでは、カスタムサブスクライバーを作成する方法を解説します。</p><h3 id="基本的な実装手順" tabindex="-1">基本的な実装手順 <a class="header-anchor" href="#基本的な実装手順" aria-label="Permalink to &quot;基本的な実装手順&quot;">​</a></h3><h4 id="_1-eventsubscriberインターフェースの実装" tabindex="-1">1. EventSubscriberインターフェースの実装 <a class="header-anchor" href="#_1-eventsubscriberインターフェースの実装" aria-label="Permalink to &quot;1. EventSubscriberインターフェースの実装&quot;">​</a></h4><p><code>EventSubscriber</code>を継承し、必要なイベントメソッドをオーバーライドします。</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomEventSubscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventSubscriber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Logger LOG </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LoggerFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLogger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CustomEventSubscriber.class);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // EventSubscriberが提供する各イベントのリスナー登録用メソッドにリスナーを登録</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		    afterSqlQueryListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">afterSqlQuery);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 初期化処理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LOG.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CustomEventSubscriber initialized&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> afterSqlQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AfterSqlQueryEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">evt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LOG.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Execute Query - sqlName:{} executed.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, evt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSqlName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_2-sqlconfigへの登録" tabindex="-1">2. SqlConfigへの登録 <a class="header-anchor" href="#_2-sqlconfigへの登録" aria-label="Permalink to &quot;2. SqlConfigへの登録&quot;">​</a></h4><p>作成したサブスクライバーを<code>SqlConfig</code>に登録します。</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SqlConfig config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UroboroSQL.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jdbc:h2:mem:test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEventListenerHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventSubscriber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomEventSubscriber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="eventsubscriber実装例-共通項目自動パラメータバインド" tabindex="-1">EventSubscriber実装例（共通項目自動パラメータバインド） <a class="header-anchor" href="#eventsubscriber実装例-共通項目自動パラメータバインド" aria-label="Permalink to &quot;EventSubscriber実装例（共通項目自動パラメータバインド）&quot;">​</a></h3><p>アプリケーションで使用する各テーブルに共通項目（登録日時、更新日時など）が定義されている場合、 INSERT文やUPDATE文を実行する際には、毎回これらの共通項目に対するパラメータを指定する必要があります。</p><p>このような共通項目へのパラメータ設定を個別に行うと、実装が煩雑になるだけでなく、 実装漏れや記述ミスにより正しく値が設定されないといった問題が発生しやすくなります。</p><p>このような共通項目へのパラメータ設定は、<code>EventSubscriber</code> を利用することで自動化できます。 <code>EventSubscriber</code> のイベントはSQL実行のたびに呼び出されるため、イベント内で共通項目のパラメータを設定することで、 すべてのSQL実行時に自動的にパラメータがバインドされます。</p><ul><li>共通項目自動パラメータバインドイベントサブスクライバー実装例</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 共通項目自動パラメータバインドイベントサブスクライバー</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> **/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AutoParameterBindEventSubscriber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventSubscriber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // SQL API 用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeParseSqlListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onBeforeParseSql);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // DAO API 用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeEntityInsertListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindInsertParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeEntityBulkInsertListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindInsertParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeEntityBatchInsertListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindInsertParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeEntityUpdateListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindUpdateParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      beforeEntityBatchUpdateListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindUpdateParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * SQLパース前のイベントを処理する.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> event</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> イベント</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onBeforeParseSql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeforeParseSqlEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSqlKind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             MERGE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             UPDATE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             BATCH_INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             BATCH_UPDATE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             BULK_INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             ENTITY_BATCH_INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             ENTITY_BULK_INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             ENTITY_INSERT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             ENTITY_UPDATE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ExecutionContext ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                LocalDateTime now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paramIfAbsent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;createDatetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, now);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">paramIfAbsent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;updateDatetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, now);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 登録用のパラメータをバインドする.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> entity</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> エンティティ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindInsertParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // DAOクラスがEntityModel抽象クラスを継承し、EntityModelクラスに共通項目のフィールドが定義されている、とします。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EntityModel model)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      LocalDateTime now </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCreateDatetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(now);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUpdateDatetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(now);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 更新用のパラメータをバインドする.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> entity</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> エンティティ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bindUpdateParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // DAOクラスがEntityModel抽象クラスを継承し、EntityModelクラスに共通項目のフィールドが定義されている、とします。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EntityModel model)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUpdateDatetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/future-architect/uroborosql-doc/edit/main/src/configuration/event-listener-holder.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/uroborosql-doc/configuration/sql-resource-manager.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>SqlResourceManager</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/uroborosql-doc/configuration/dialect.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Dialect</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><!----><p class="copyright" data-v-e315a0ad>MIT Licensed | ©2018-2026 Future Corporation. All rights reserved.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about_index.md\":\"BhWICBEY\",\"advanced_cache-metadata.md\":\"D0MX9f4H\",\"advanced_in-transaction-exception-handling.md\":\"2xnbtUAC\",\"advanced_index.md\":\"BByvo7TF\",\"advanced_logging.md\":\"DnecPUJ2\",\"advanced_parameter-mapping.md\":\"DhwNYynY\",\"advanced_sql-coverage.md\":\"DIFHgoHx\",\"advanced_system-properties.md\":\"vUiayY7V\",\"advanced_update-delegate.md\":\"BFpp3aWl\",\"background_el.md\":\"Dj6OPyWB\",\"background_index.md\":\"CSFH2L0Q\",\"basics_entity-api.md\":\"C9qLRtE4\",\"basics_index.md\":\"DSiCkavd\",\"basics_sql-file-api.md\":\"ifWElbc_\",\"basics_transaction.md\":\"CRP7BHPV\",\"best_practices_index.md\":\"DmHdk03k\",\"configuration_connection-supplier.md\":\"BiHMsNzN\",\"configuration_dialect.md\":\"BGDTpKmi\",\"configuration_event-listener-holder.md\":\"C26urwMy\",\"configuration_execution-context-provider.md\":\"DnYQsVHV\",\"configuration_index.md\":\"DclJ7qeu\",\"configuration_sql-agent-provider.md\":\"B06txwCc\",\"configuration_sql-resource-manager.md\":\"ej4VA8mY\",\"developer_guide_index.md\":\"BnvZOv_s\",\"developer_tools_index.md\":\"C4_GoK39\",\"getting_started_entity-access.md\":\"K93gtQ_y\",\"getting_started_index.md\":\"SaceTMeE\",\"getting_started_sql-file-access.md\":\"J4YLwwOJ\",\"getting_started_sql-repl.md\":\"BUqCQu0A\",\"index.md\":\"6HrCsOEj\",\"license_index.md\":\"D7iNJmOh\",\"why_uroborosql_index.md\":\"D6YgQKTV\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"uroboroSQL\",\"description\":\"uroboroSQLはJava製のシンプルなSQL実行ライブラリです\",\"base\":\"/uroborosql-doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"\",\"logo\":\"https://future-architect.github.io/uroborosql-doc/images/logo.png\",\"footer\":{\"copyright\":\"MIT Licensed | ©2018-2026 Future Corporation. All rights reserved.\"},\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"editLink\":{\"pattern\":\"https://github.com/future-architect/uroborosql-doc/edit/main/src/:path\"},\"outline\":{\"level\":\"deep\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Getting Started\",\"link\":\"/getting_started/\"},{\"text\":\"基本操作\",\"link\":\"/basics/\"},{\"text\":\"ベストプラクティス\",\"link\":\"/best_practices/\"},{\"text\":\"設定\",\"link\":\"/configuration/\"},{\"text\":\"高度な操作\",\"link\":\"/advanced/\"},{\"text\":\"Developer Tools\",\"link\":\"/developer_tools/\"},{\"text\":\"Old Version\",\"link\":\"https://future-architect.github.io/uroborosql-doc_v0.x/\"}],\"sidebar\":{\"/\":[{\"text\":\"Why uroboroSQL\",\"collapsed\":true,\"items\":[{\"text\":\"uroboroSQLとは\",\"link\":\"/why_uroborosql/\"}]},{\"text\":\"Getting Started\",\"collapsed\":true,\"items\":[{\"text\":\"環境設定\",\"link\":\"/getting_started/\"},{\"text\":\"SQLファイルを使用したDBアクセス\",\"link\":\"/getting_started/sql-file-access.html\"},{\"text\":\"エンティティクラスを使用したDBアクセス\",\"link\":\"/getting_started/entity-access.html\"},{\"text\":\"SQL-REPL\",\"link\":\"/getting_started/sql-repl.html\"}]},{\"text\":\"前提知識\",\"collapsed\":true,\"items\":[{\"text\":\"2WaySQL\",\"link\":\"/background/\"},{\"text\":\"式言語\",\"link\":\"/background/el.html\"}]},{\"text\":\"基本操作\",\"collapsed\":true,\"items\":[{\"text\":\"事前準備\",\"link\":\"/basics/\"},{\"text\":\"SQLファイルインタフェース\",\"link\":\"/basics/sql-file-api.html\"},{\"text\":\"DAOインタフェース\",\"link\":\"/basics/entity-api.html\"},{\"text\":\"トランザクション\",\"link\":\"/basics/transaction.html\"}]},{\"text\":\"ベストプラクティス\",\"collapsed\":true,\"items\":[{\"text\":\"ベストプラクティス\",\"link\":\"/best_practices/\"}]},{\"text\":\"設定\",\"collapsed\":true,\"items\":[{\"text\":\"SqlConfigの生成\",\"link\":\"/configuration/\"},{\"text\":\"ConnectionSupplier\",\"link\":\"/configuration/connection-supplier.html\"},{\"text\":\"SqlAgentProvider\",\"link\":\"/configuration/sql-agent-provider.html\"},{\"text\":\"ExecutionContextProvider\",\"link\":\"/configuration/execution-context-provider.html\"},{\"text\":\"SqlResourceManager\",\"link\":\"/configuration/sql-resource-manager.html\"},{\"text\":\"EventListenerHolder と EventSubscriber\",\"link\":\"/configuration/event-listener-holder.html\"},{\"text\":\"Dialect\",\"link\":\"/configuration/dialect.html\"}]},{\"text\":\"高度な操作\",\"collapsed\":true,\"items\":[{\"text\":\"SQLファイルの解決ルール\",\"link\":\"/advanced/\"},{\"text\":\"PostgreSQLのトランザクション内SQLエラー対応\",\"link\":\"/advanced/in-transaction-exception-handling.html\"},{\"text\":\"メタデータのキャッシュ\",\"link\":\"/advanced/cache-metadata.html\"},{\"text\":\"JavaオブジェクトとJDBC型のパラメータマッピング\",\"link\":\"/advanced/parameter-mapping.html\"},{\"text\":\"更新処理の委譲\",\"link\":\"/advanced/update-delegate.html\"},{\"text\":\"SQLカバレッジ\",\"link\":\"/advanced/sql-coverage.html\"},{\"text\":\"ログ出力\",\"link\":\"/advanced/logging.html\"},{\"text\":\"システムプロパティ\",\"link\":\"/advanced/system-properties.html\"}]},{\"text\":\"Developer Tools\",\"link\":\"/developer_tools/\"},{\"text\":\"開発者ガイド\",\"link\":\"/developer_guide/\"},{\"text\":\"License\",\"link\":\"/license/\"},{\"text\":\"uroboroSQLについて\",\"link\":\"/about/\"}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/future-architect/uroborosql\"}]},\"locales\":{\"root\":{\"lang\":\"ja\"}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>